<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achieve-mate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-primary);
        }
        
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #ffd166;
            --success: #06d6a0;
            --warning: #ef476f;
            --light: #f8f9fa;
            --dark: #121212;
            --gray: #6c757d;
            --card-bg: #1e1e1e;
            --text: #e9ecef;
            --border: #333;
            --glow: rgba(67, 97, 238, 0.3);
            --background: #121212;
            --tab-glow: rgba(67, 97, 238, 0.5);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-display: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
            font-family: var(--font-primary);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--success));
            animation: headerGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes headerGlow {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            color: var(--accent);
            text-shadow: 0 0 10px var(--glow);
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
        }
        
        .tagline {
            font-size: 1rem;
            opacity: 0.8;
            font-family: 'Poppins', sans-serif;
        }
        
        .streak-header {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 12px 24px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(67, 97, 238, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        
        .streak-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .streak-header:hover::before {
            left: 100%;
        }
        
        .streak-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(67, 97, 238, 0.6);
            border-color: var(--accent);
        }
        
        .streak-header:active {
            transform: translateY(0);
        }
        
        .streak-header .fire-icon {
            color: var(--accent);
            font-size: 1.6rem;
            filter: drop-shadow(0 0 8px rgba(255, 209, 102, 0.6));
        }
        
        .streak-header .streak-number {
            font-size: 1.6rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .streak-header .streak-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.95);
            font-weight: 500;
        }
        
        .app-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 20px;
        }
        
        @media (max-width: 1100px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Enhanced Tab Navigation - DESKTOP */
        .nav-tabs {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .nav-tab {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 0;
        }
        
        .nav-tab.active {
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--tab-glow), 0 4px 10px rgba(0, 0, 0, 0.2);
            transform: translateY(-5px);
        }
        
        .nav-tab.active::before {
            opacity: 0.1;
        }
        
        .nav-tab:hover:not(.active) {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .tab-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent);
            position: relative;
            z-index: 1;
        }
        
        .nav-tab.active .tab-icon {
            animation: pulse 1.5s infinite;
        }
        
        .tab-title {
            font-weight: 600;
            font-size: 1.1rem;
            position: relative;
            z-index: 1;
            font-family: 'Quicksand', sans-serif;
        }
        
        .nav-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .nav-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* MOBILE NAVIGATION */
        .mobile-nav {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mobile-nav-tab {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 0;
        }
        
        .mobile-nav-tab.active {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--tab-glow), 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
        }
        
        .mobile-nav-tab.active::before {
            opacity: 0.1;
        }
        
        .mobile-nav-tab:hover:not(.active) {
            transform: scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .mobile-tab-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: var(--accent);
            position: relative;
            z-index: 1;
        }
        
        .mobile-nav-tab.active .mobile-tab-icon {
            animation: pulse 1.5s infinite;
        }
        
        .mobile-tab-title {
            font-weight: 600;
            font-size: 0.8rem;
            position: relative;
            z-index: 1;
            text-align: center;
            line-height: 1.2;
            font-family: 'Quicksand', sans-serif;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            header {
                padding: 15px;
                margin-bottom: 20px;
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .tagline {
                font-size: 0.9rem;
            }
            
            .streak-header {
                padding: 10px 20px;
            }
            
            .streak-header .streak-number {
                font-size: 1.4rem;
            }
            
            /* Hide desktop navigation on mobile */
            .nav-tabs {
                display: none;
            }
            
            
            
        }
        
        @media (min-width: 769px) {
            .mobile-nav {
                display: none;
            }
            
            .nav-tabs {
                display: grid;
            }
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }
        
        .card:hover::before {
            transform: scaleX(1);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }
        
        .card-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
        }
        
        /* IMPROVED Dashboard Styles */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--card-bg), var(--dark));
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 160px;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, var(--glow), transparent);
            opacity: 0;
            transition: opacity 0.4s;
        }
        
        .stat-card:hover::before {
            opacity: 0.15;
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--primary);
        }
        
        .stat-icon {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: var(--accent);
            opacity: 0.9;
            filter: drop-shadow(0 0 10px rgba(255, 209, 102, 0.3));
        }
        
        .stat-number {
            font-size: 2.4rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 5px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
            font-family: 'Quicksand', sans-serif;
        }
        
        .stat-label {
            font-size: 1rem;
            color: var(--text);
            font-weight: 600;
            opacity: 0.9;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }
        
        .stat-description {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 8px;
            opacity: 0.8;
            font-weight: 500;
        }
        
        /* Circular Progress Bar Styles - UPDATED: Remove glow effects */
        .stat-card {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }
        .circular-progress-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 15px;
        }
        .circular-progress {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        .circular-progress-bg {
            fill: none;
            stroke: var(--border);
            stroke-width: 8;
        }
        .circular-progress-fill {
            fill: none;
            stroke: var(--accent);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 0 339.292;
            stroke-dashoffset: 0;
            transition: stroke 0.3s ease;
        }
        /* Remove all glow and shadow effects */
        #topicsProgressCircle,
        #goalsProgressCircle {
            fill: none;
            stroke: var(--accent);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 0 339.292;
            filter: none !important; /* Remove glow filters */
            box-shadow: none !important; /* Remove box shadows */
        }
        /* Animation Keyframes - Simplified without glow */
        @keyframes progressAnimation {
            0% {
                stroke-dasharray: 0 339.292;
            }
            100% {
                stroke-dasharray: var(--progress) 339.292;
            }
        }
        .animate-progress {
            animation: progressAnimation 2.5s cubic-bezier(0.1, 0.8, 0.2, 1) forwards;
        }
        .circular-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            text-shadow: none; /* Remove text shadow */
        }
        /* Clean 100% completion styling */
        .circular-progress-fill.complete {
            stroke: var(--success) !important;
            filter: none !important; /* Remove glow filter */
        }
        .circular-progress-fill.complete + .circular-progress-text {
            color: var(--success) !important;
            text-shadow: none; /* Remove text shadow */
        }
        .stat-label {
            margin-top: 10px;
            font-size: 1rem;
            color: var(--text);
            opacity: 0.9;
            text-align: center;
            font-weight: 500;
        }
        
        /* Today's Goals in Dashboard */
        .today-goals {
            margin-top: 20px;
        }
        
        .goal-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: var(--dark);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .goal-checkbox {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--gray);
            appearance: none;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .goal-checkbox:checked {
            background-color: var(--success);
            border-color: var(--success);
        }
        
        .goal-checkbox:checked::after {
            content: "✓";
            position: absolute;
            color: white;
            font-size: 14px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .goal-text {
            flex-grow: 1;
        }
        
        /* Enhanced Calendar Container */
/* Improved Calendar Modal */
.calendar-modal-content {
    max-width: 1000px;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
}

.calendar-layout-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    height: 100%;
    overflow: hidden;
}

@media (min-width: 769px) {
    .calendar-layout-container {
        grid-template-columns: 1fr 1.2fr;
    }
}

/* Calendar Section */
.calendar-section {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 420px;
}

/* .calendar-stats {
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid var(--border);
} */

.stat-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
    font-size: 0.9rem;
    color: var(--text);
}

.stat-item i {
    color: var(--accent);
    width: 16px;
}

.stat-item strong {
    color: var(--accent);
}

/* Study Details Section */
.study-details-section {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 420px;
}

.study-details-header {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border);
}

.study-details-header h3 {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--accent);
}

.study-details-content {
    flex: 1;
    overflow-y: auto;
    padding-right: 8px;
}

.study-details-content::-webkit-scrollbar {
    width: 6px;
}

.study-details-content::-webkit-scrollbar-track {
    background: var(--dark);
    border-radius: 3px;
}

.study-details-content::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

/* Enhanced Calendar Grid */
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
    flex: 1;
}

.calendar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
}

.calendar-nav {
    background: none;
    border: none;
    color: var(--accent);
    font-size: 1.4rem;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 6px;
    transition: background .2s;
}

.calendar-nav:hover {
    background: rgba(255, 255, 255, .08);
}

.calendar-day-header {
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: var(--accent);
    font-size: 0.85rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
}

.calendar-day {
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    font-weight: 600;
    background: var(--dark);
    border: 2px solid transparent;
    cursor: pointer;
    transition: all .2s;
    position: relative;
    font-size: .9rem;
}

.calendar-day.empty {
    background: transparent;
    border-color: transparent;
    cursor: default;
}

.calendar-day:hover:not(.empty) {
    background: rgba(255, 255, 255, .1);
    border-color: var(--primary);
    transform: translateY(-2px);
}

.calendar-day.active {
    background: linear-gradient(135deg, var(--accent), var(--primary));
    color: var(--dark);
    border-color: var(--accent);
    box-shadow: 0 4px 15px rgba(255, 209, 102, .4);
    transform: scale(1.05);
}

.calendar-day.studied {
    background: linear-gradient(135deg, rgba(6, 214, 160, .3), rgba(67, 97, 238, .2));
    border-color: rgba(6, 214, 160, .5);
}

.calendar-day.studied::after {
    content: "✓";
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 9px;
    color: var(--success);
    font-weight: 700;
    background: rgba(0, 0, 0, .7);
    width: 14px;
    height: 14px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Enhanced Study Details */
.study-details-content .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--gray);
}

.study-details-content .empty-state i {
    font-size: 3rem;
    margin-bottom: 15px;
    color: var(--border);
}

.study-details-content .empty-state h4 {
    color: var(--accent);
    margin-bottom: 10px;
}

/* Study Items - More Compact */
.study-item-compact {
    background: var(--dark);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 8px;
    border-left: 4px solid var(--success);
    transition: all 0.3s ease;
}

.study-item-compact:hover {
    transform: translateX(3px);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
}

.study-playlist-name {
    font-weight: 600;
    color: var(--accent);
    font-size: 0.9rem;
    margin-bottom: 5px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.study-topic-name {
    color: var(--text);
    font-size: 0.85rem;
    line-height: 1.3;
    display: flex;
    align-items: flex-start;
    gap: 6px;
}

.study-topic-name i {
    color: var(--primary);
    margin-top: 2px;
    flex-shrink: 0;
    font-size: .75rem;
}

.study-time {
    color: var(--gray);
    font-size: 0.75rem;
    margin-top: 4px;
    display: flex;
    align-items: center;
    gap: 5px;
}

/* Goals Section */
.goals-section {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border);
}

.goal-item-compact {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.goal-item-compact:last-child {
    border-bottom: none;
}

.goal-status {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 0.7rem;
}

.goal-status.completed {
    background: rgba(6, 214, 160, 0.2);
    color: var(--success);
}

.goal-status.pending {
    background: rgba(239, 71, 111, 0.2);
    color: var(--warning);
}

.goal-text {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text);
}

/* Responsive Design */
@media (max-width: 768px) {
    .calendar-layout-container {
        grid-template-columns: 1fr;
        gap: 15px;
        max-height: none;
        overflow-y: auto;
    }
    
    .calendar-section {
        min-height: 400px;
    }
    
    .study-details-section {
        min-height: 300px;
    }
    
    .calendar-modal-content {
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .calendar-grid {
        gap: 4px;
    }
    
    .calendar-day {
        height: 35px;
        font-size: 0.8rem;
    }
    
    .calendar-day-header {
        height: 30px;
        font-size: 0.75rem;
    }
}

@media (max-width: 480px) {
    .calendar-modal-content {
        padding: 15px;
    }
    
    .calendar-section,
    .study-details-section {
        padding: 15px;
    }
    
    .calendar-day {
        height: 30px;
        font-size: 0.75rem;
    }
    
    .calendar-day-header {
        height: 25px;
        font-size: 0.7rem;
    }
}
        

/* Enhanced Study Details Styles */
.study-item-enhanced {
    background: var(--dark);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 12px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.study-item-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--success), var(--primary));
}

.study-item-enhanced:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    border-color: var(--primary);
}

.study-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
    gap: 10px;
}

.study-playlist {
    font-weight: 600;
    color: var(--accent);
    font-size: 0.95rem;
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 1;
}

.study-badge {
    background: rgba(6, 214, 160, 0.2);
    color: var(--success);
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid rgba(6, 214, 160, 0.3);
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
}

.study-topic {
    color: var(--text);
    margin-bottom: 8px;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    line-height: 1.4;
}

.study-topic i {
    color: var(--primary);
    margin-top: 2px;
    flex-shrink: 0;
}

.study-time {
    color: var(--gray);
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Enhanced Goal Items */
/* Enhanced Study Details Section */
.study-details {
    margin-top: 20px;
    padding: 25px;
    background: var(--dark);
    border-radius: 15px;
    border: 1px solid var(--border);
    animation: fadeIn 0.5s ease;
    max-height: 500px; /* Increased height */
    min-height: 200px; /* Minimum height */
    overflow-y: auto;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.study-details:hover {
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
    transform: translateY(-3px);
}

.study-details h4 {
    margin-bottom: 20px;
    color: var(--accent);
    font-size: 1.3rem;
    border-bottom: 2px solid var(--primary);
    padding-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.study-details h5 {
    margin: 15px 0 10px 0; /* Adjusted margin */
    color: var(--accent);
    font-size: 1rem; /* Adjusted font size */
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Enhanced Study Items - More compact */
.study-item-enhanced {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 12px 15px;
    margin-bottom: 10px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.study-item-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--success), var(--primary));
}

.study-item-enhanced:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    border-color: var(--primary);
}

.study-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 6px;
    gap: 10px;
}

.study-playlist {
    font-weight: 600;
    color: var(--accent);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 1;
}

.study-badge {
    background: rgba(6, 214, 160, 0.2);
    color: var(--success);
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 0.7rem;
    font-weight: 600;
    border: 1px solid rgba(6, 214, 160, 0.3);
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
}

.study-topic {
    color: var(--text);
    margin-bottom: 5px;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    line-height: 1.3;
    font-size: 0.9rem;
}

.study-topic i {
    color: var(--primary);
    margin-top: 2px;
    flex-shrink: 0;
    font-size: 0.8rem;
}

.study-time {
    color: var(--gray);
    font-size: 0.75rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

/* Enhanced Goal Items - More compact */
.goal-item-enhanced {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    background: var(--card-bg);
    border-radius: 8px;
    margin-bottom: 8px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
}

.goal-item-enhanced:hover {
    transform: translateX(3px);
    border-color: var(--accent);
}

.goal-status {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
    font-size: 0.8rem;
}

.goal-status.completed {
    background: rgba(6, 214, 160, 0.2);
    color: var(--success);
}

.goal-status.pending {
    background: rgba(239, 71, 111, 0.2);
    color: var(--warning);
}

.goal-content {
    flex: 1;
}

.goal-title {
    font-weight: 500;
    color: var(--text);
    margin-bottom: 2px;
    font-size: 0.9rem;
    line-height: 1.3;
}

.goal-meta {
    font-size: 0.75rem;
    color: var(--gray);
}

/* Goals Progress - More compact */
.goals-progress {
    background: var(--card-bg);
    border-radius: 8px;
    padding: 12px 15px;
    margin-bottom: 15px;
    border: 1px solid var(--border);
}

.goals-progress > div {
    display: flex;
    justify-content: space-between;
    font-size: .9rem;
    margin-bottom: 6px;
}

/* Studies Container - Better scrolling */
.studies-container {
    max-height: 250px; /* Increased scrollable area */
    overflow-y: auto;
    margin-top: 10px;
    padding-right: 5px;
}

/* No Studies Message */
.no-studies-message {
    text-align: center;
    padding: 30px 20px; /* Adjusted padding */
    color: var(--gray);
}

.no-studies-message i {
    font-size: 2.5rem; /* Adjusted size */
    margin-bottom: 10px;
    color: var(--border);
}

.no-studies-message p {
    margin: 0;
    font-size: 0.9rem;
}

/* Custom scrollbar improvements */
.study-details::-webkit-scrollbar {
    width: 8px;
}

.study-details::-webkit-scrollbar-track {
    background: var(--border);
    border-radius: 4px;
}

.study-details::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--primary), var(--accent));
    border-radius: 4px;
}

.study-details::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--accent), var(--primary));
}

.studies-container::-webkit-scrollbar {
    width: 6px;
}

.studies-container::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
}

.studies-container::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

/* Compact layout for multiple items */
.compact-layout {
    display: grid;
    gap: 8px;
}

/* Statistics header */
.stats-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap; /* Added for responsiveness */
    gap: 10px; /* Added for responsiveness */
}

.stats-summary {
    display: flex;
    gap: 10px; /* Reduced gap */
    font-size: 0.85rem;
}

.stat-badge {
    background: var(--primary);
    color: white;
    padding: 4px 10px; /* Adjusted padding */
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 5px; /* Adjusted gap */
}
        
        /* Courses Tab Styles */
        .tabs-container {
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            position: relative;
        }
        
        .tabs-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--accent);
            transition: all 0.3s ease;
            width: 33.33%;
            transform: translateX(0);
        }
        
        .tabs-container[data-active-tab="in-progress"]::after {
            transform: translateX(100%);
        }
        
        .tabs-container[data-active-tab="completed"]::after {
            transform: translateX(200%);
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            color: var(--text);
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .tab.active {
            color: var(--accent);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
            min-height: 200px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .playlist-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 5px solid var(--primary);
            transition: all 0.3s;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        
        .playlist-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, var(--glow), transparent);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 0;
        }
        
        .playlist-item:hover::before {
            opacity: 0.1;
        }
        
        .playlist-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* FIXED: Playlist header layout for long names */
        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            cursor: pointer;
            position: relative;
            z-index: 1;
            gap: 15px;
        }
        
        .playlist-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            flex: 1;
            min-width: 0; /* Important for text truncation */
        }
        
        .playlist-title-text {
            flex: 1;
            min-width: 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* FIXED: Playlist actions layout */
        .playlist-actions {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-shrink: 0;
            flex-wrap: wrap;
            justify-content: flex-end;
        }
        
        .playlist-stats {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: var(--gray);
            position: relative;
            z-index: 1;
            margin-bottom: 10px;
        }
        
        .playlist-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            position: relative;
            z-index: 1;
        }
        
        .playlist-details.expanded {
            max-height: 1000px;
        }
        
        .video-list {
            margin-top: 15px;
        }
        
        .video-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: var(--dark);
            transition: all 0.3s;
            border: 1px solid var(--border);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .video-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, var(--glow), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .video-item:hover::before {
            opacity: 0.1;
        }
        
        .video-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .video-item.locked {
            opacity: 0.6;
            background: rgba(255, 255, 255, 0.02);
            cursor: not-allowed;
        }
        
        /* FIXED: Enhanced video checkbox styling */
        .video-checkbox {
            margin-right: 15px;
            width: 22px;
            height: 22px;
            border-radius: 6px;
            border: 2px solid var(--gray);
            appearance: none;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            z-index: 1;
            background: var(--card-bg);
            flex-shrink: 0;
        }
        
        .video-checkbox:checked {
            background-color: var(--success);
            border-color: var(--success);
            box-shadow: 0 0 10px var(--success);
        }
        
        .video-checkbox:checked::after {
            content: "✓";
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .video-checkbox:not(:checked):hover {
            border-color: var(--accent);
            box-shadow: 0 0 5px var(--accent);
            transform: scale(1.1);
        }
        
        .video-checkbox:checked:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--success);
        }
        
        .video-title {
            flex-grow: 1;
            z-index: 1;
            padding-right: 10px;
        }
        
        .video-status {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
            z-index: 1;
            flex-shrink: 0;
        }
        
        .status-completed {
            background: rgba(6, 214, 160, 0.2);
            color: #06d6a0;
            border: 1px solid rgba(6, 214, 160, 0.3);
        }
        
        .status-pending {
            background: rgba(239, 71, 111, 0.2);
            color: #ef476f;
            border: 1px solid rgba(239, 71, 111, 0.3);
        }
        
        .status-locked {
            background: rgba(108, 117, 125, 0.2);
            color: var(--gray);
            border: 1px solid rgba(108, 117, 125, 0.3);
        }
        
        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }
        
        .progress {
            height: 100%;
            background: var(--accent);
            border-radius: 10px;
            transition: width 0.5s;
            position: relative;
        }
        
        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--border);
        }
        
        .create-first-playlist {
            text-align: center;
            padding: 60px 20px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 2px dashed var(--border);
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .create-first-playlist:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .create-first-playlist i {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 20px;
            display: block;
        }
        
        .create-first-playlist h3 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .create-first-playlist p {
            color: var(--gray);
            margin-bottom: 25px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .create-first-playlist .btn-primary {
            padding: 15px 30px;
            font-size: 1.1rem;
        }
        
        /* Goals Tab Styles */
        .goal-form {
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--card-bg);
            color: var(--text);
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px var(--glow);
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-edit {
            background-color: var(--accent);
            color: var(--dark);
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        .btn-edit:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* FIXED: Enhanced Open Button */
        .open-resource-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            flex-shrink: 0;
        }
        
        .open-resource-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.4);
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }
        
        .open-resource-btn:active {
            transform: translateY(0);
        }
        
        .progress-container {
            margin-top: 20px;
        }
        
        .progress-item {
            margin-bottom: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-name {
            font-weight: 600;
        }
        
        .progress-percentage {
            color: var(--accent);
            font-weight: 700;
        }
        
        .horizontal-progress {
            height: 12px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .horizontal-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
            position: relative;
        }
        
        .horizontal-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg,
                rgba(255, 255, 255, 0) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0) 50%,
                rgba(255, 255, 255, 0) 75%,
                transparent 75%,
                transparent
            );
            background-size: 20px 20px;
            animation: move 1s linear infinite;
            border-radius: 10px;
        }
        
        @keyframes move {
            0% { background-position: 0 0; }
            100% { background-position: 20px 0; }
        }
        
        /* Improved Timeline Styles */



.timeline-chart-container {

    display: flex;

    flex-direction: column;

    height: 220px; /* Reduced height for web */

    margin-top: -10px; /* Reduce top margin */

}

.timeline-chart-area {

    display: flex;

    flex: 1;

    align-items: stretch;

}

.timeline-y-axis {

    display: flex;

    flex-direction: column;

    justify-content: space-between;

    align-items: flex-end;

    padding-right: 12px;

    min-width: 45px;

    margin-bottom: 25px; /* Space for day labels */

}

.y-axis-label {

    font-size: 0.75rem;

    color: var(--gray);

    font-weight: 500;

    padding: 2px 0;

}

.timeline-chart-content {

    flex: 1;

    position: relative;

    display: flex;

    flex-direction: column;

}

.timeline-grid-lines {

    position: absolute;

    top: 0;

    left: 0;

    right: 0;

    bottom: 25px; /* Space for day labels */

    display: flex;

    flex-direction: column;

    justify-content: space-between;

    pointer-events: none;

}

.grid-line {

    width: 100%;

    height: 1px;

    background: rgba(255, 255, 255, 0.1);

}

.timeline-bars-container {

    display: grid;

    grid-template-columns: repeat(7, 1fr);

    gap: 10px;

    align-items: end;

    height: 100%;

    padding: 0 5px;

    margin-bottom: 25px; /* Fixed space for day labels */

}

.timeline-bar-column {

    display: flex;

    flex-direction: column;

    align-items: center;

    height: 100%;

    justify-content: flex-end;

}

.timeline-bar {

    width: 100%;

    min-height: 8px;

    border-radius: 6px 6px 2px 2px;

    transition: all 0.3s ease;

    cursor: pointer;

    position: relative;

    margin-bottom: 5px;

    /* Initial state for animation */

    transform: scaleY(0.1);

    transform-origin: bottom;

    opacity: 0.7;

}

.timeline-bar.animate {

    animation: barGrow 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;

}

@keyframes barGrow {

    0% {

        transform: scaleY(0.1);

        opacity: 0.7;

    }

    60% {

        transform: scaleY(1.1);

        opacity: 0.9;

    }

    100% {

        transform: scaleY(1);

        opacity: 1;

    }

}

/* Dynamic Bar Colors Using Classes */

.timeline-bar.color-0 {

    background: linear-gradient(180deg, #eaff6287, #dafd4c8b) !important;

}

.timeline-bar.color-1-25 {

    background: linear-gradient(180deg, #ffd166, #ffc107) !important;

}

.timeline-bar.color-26-50 {

    background: linear-gradient(180deg, #ffd166, #e6b800) !important;

}

.timeline-bar.color-51-75 {

    background: linear-gradient(180deg, #7209b7, var(--secondary)) !important;

}

.timeline-bar.color-76-99 {

    background: linear-gradient(180deg, var(--primary), #ebee3a) !important;

}

.timeline-bar.color-100 {

    background: linear-gradient(180deg, var(--success), #dbcb13) !important;

}

/* Enhanced hover effects */

.timeline-bar:hover {

    transform: scaleY(1.05) !important;

    filter: brightness(1.1);

    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

}

.bar-data-label {

    position: absolute;

    top: -25px;

    left: 50%;

    transform: translateX(-50%);

    background: var(--card-bg);

    padding: 4px 8px;

    border-radius: 4px;

    font-size: 0.7rem;

    font-weight: 600;

    color: var(--accent);

    border: 1px solid var(--border);

    opacity: 0;

    transition: opacity 0.3s ease;

    white-space: nowrap;

    z-index: 10;

}

.timeline-bar:hover .bar-data-label {

    opacity: 1;

}

.timeline-day-label {

    text-align: center;

    font-size: 0.75rem;

    color: var(--text);

    font-weight: 500;

    padding: 3px 0;

    width: 100%;

    position: absolute;

    bottom: -25px; /* Fixed position below bars */

}

/* Mobile Responsive Fixes */

@media (max-width: 768px) {

    .timeline-chart-container {

        height: 200px; /* Slightly smaller on mobile */

    }

    

    .timeline-bars-container {

        gap: 6px;

        padding: 0 3px;

    }

    

    .timeline-bar {

        margin-bottom: 4px;

    }

    

    .timeline-day-label {

        font-size: 0.7rem;

        bottom: -22px;

    }

    

    .y-axis-label {

        font-size: 0.7rem;

    }

    

    .bar-data-label {

        font-size: 0.65rem;

        padding: 3px 6px;

        top: -22px;

    }

}

@media (max-width: 480px) {

    .timeline-chart-container {

        height: 180px;

    }

    

    .timeline-bars-container {

        gap: 4px;

    }

    

    .timeline-day-label {

        font-size: 0.65rem;

        bottom: -20px;

    }

}

/* Web-specific optimizations */

@media (min-width: 769px) {

    .timeline-chart-container {

        height: 200px; /* Optimal height for web */

    }

    

    .timeline-bars-container {

        gap: 12px;

        padding: 0 10px;

    }

    

    .card .timeline-container {

        margin-top: 15px; /* Reduced margin for web */

        padding: 20px; /* Reduced padding */

    }

}



/* Reduce margin for Progress Timeline section on web */

@media (min-width: 769px) {

    #goals-content .card:last-child {

        margin-top: 10px; /* Reduced from 20px */

    }

    

    .timeline-container {

        margin-top: 15px !important; /* Reduced from 30px */

        padding: 20px 25px !important; /* Reduced padding */

    }

    

    .timeline-header {

        margin-bottom: 15px !important; /* Reduced from 25px */

    }

    

    .timeline-header h3 {

        font-size: 1.3rem !important; /* Slightly smaller title */

        margin-bottom: 8px !important;

    }

}



/* Compact layout for goals tab */

#goals-content .card:first-child {

    margin-bottom: 15px; /* Reduced space between cards */

}


        
        /* === IMPROVED ACHIEVEMENTS SECTION FOR WEB === */

.achievements-header {

    display: flex;

    justify-content: space-between;

    align-items: flex-start;

    margin-bottom: 25px;

    flex-wrap: wrap;

    gap: 15px;

}
.achievements-count-badge {

    background: linear-gradient(135deg, var(--primary), var(--secondary));

    color: white;

    padding: 10px 20px;

    border-radius: 20px;

    font-size: 1rem;

    font-weight: 600;

    display: flex;

    align-items: center;

    gap: 8px;

    box-shadow: 0 4px 12px rgba(69, 119, 212, 0.3);

    white-space: nowrap;

}
/* Filter buttons for achievements */
.achievements-filter {

    display: flex;

    gap: 10px;

    margin-bottom: 25px;

    flex-wrap: wrap;

}
.filter-btn {

    padding: 8px 16px;

    background: var(--dark);

    border: 1px solid var(--border);

    border-radius: 20px;

    color: var(--text);

    cursor: pointer;

    transition: all 0.3s ease;

    font-size: 0.9rem;

    font-weight: 500;

}
.filter-btn:hover {

    background: rgba(67, 97, 238, 0.1);

    border-color: var(--primary);

}
.filter-btn.active {

    background: var(--primary);

    color: white;

    border-color: var(--primary);

}
/* Enhanced achievements grid for web */
.achievements-grid {

    display: grid;

    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));

    gap: 25px;

    margin-top: 20px;

}

/* Achievement card - Enhanced for web */

.achievement-card {

    background: var(--card-bg);

    border-radius: 16px;

    padding: 25px;

    border: 2px solid var(--border);

    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    position: relative;

    overflow: hidden;

    display: flex;

    flex-direction: column;

    min-height: 200px;

    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);

}

.achievement-card::before {

    content: '';

    position: absolute;

    top: 0;

    left: 0;

    right: 0;

    height: 3px;

    background: linear-gradient(90deg, var(--primary), var(--accent));

    transform: scaleX(0);

    transition: transform 0.3s ease;

}

.achievement-card:hover::before {

    transform: scaleX(1);

}

.achievement-card:hover {

    transform: translateY(-8px);

    border-color: var(--primary);

    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);

}

/* Earned achievement styling */

.achievement-card.earned {

    border-color: var(--accent);

    background: linear-gradient(135deg, var(--card-bg), rgba(67, 97, 238, 0.05));

    box-shadow: 0 8px 25px rgba(255, 209, 102, 0.15);

}

.achievement-card.earned::before {

    transform: scaleX(1);

    background: linear-gradient(90deg, var(--accent), var(--success));

}

.achievement-card.earned:hover {

    border-color: var(--accent);

    box-shadow: 0 15px 35px rgba(255, 209, 102, 0.25);

}

/* Achievement header - Improved layout */

.achievement-header {

    display: flex;

    align-items: flex-start;

    gap: 18px;

    margin-bottom: 18px;

}

.achievement-icon-container {

    width: 70px;

    height: 70px;

    border-radius: 14px;

    display: flex;

    align-items: center;

    justify-content: center;

    flex-shrink: 0;

    background: var(--dark);

    border: 2px solid var(--border);

    transition: all 0.3s ease;

    position: relative;

}

.achievement-card.earned .achievement-icon-container {

    background: linear-gradient(135deg, var(--accent), var(--primary));

    border-color: var(--accent);

    box-shadow: 0 6px 20px rgba(255, 209, 102, 0.3);

    animation: pulse-glow 2s infinite;

}

@keyframes pulse-glow {

    0% { box-shadow: 0 6px 20px rgba(255, 209, 102, 0.3); }

    50% { box-shadow: 0 6px 25px rgba(255, 209, 102, 0.5); }

    100% { box-shadow: 0 6px 20px rgba(255, 209, 102, 0.3); }

}

.achievement-icon {

    font-size: 2rem;

    color: var(--gray);

    transition: all 0.3s ease;

}

.achievement-card.earned .achievement-icon {

    color: rgba(58, 46, 8, 0.788);

}

.achievement-info {

    flex: 1;

    min-width: 0;

}

.achievement-name {

    font-size: 1.3rem;

    font-weight: 700;

    color: var(--text);

    margin-bottom: 8px;

    line-height: 1.3;

    font-family: 'Quicksand', sans-serif;

}

.achievement-card.earned .achievement-name {

    color: var(--accent);

    text-shadow: 0 0 10px rgba(255, 209, 102, 0.3);

}

.achievement-description {

    font-size: 0.95rem;

    color: var(--gray);

    line-height: 1.4;

    margin-bottom: 8px;

}

/* Achievement Progress Bar Styles for Locked Badges */
.achievement-progress-section {
    margin-top: auto;
    width: 100%;
    padding-top: 15px;
}

.progress-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 0.95rem;
}

.progress-text {
    color: var(--text);
    font-weight: 600;
}

.progress-percentage {
    color: var(--accent);
    font-weight: 700;
}

.achievement-card.earned .progress-percentage {
    color: var(--success);
}

/* Progress bar - only show for unearned achievements */
.progress-container {
    height: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

.achievement-card.earned .progress-container {
    display: none; /* Hide for earned achievements */
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: 10px;
    transition: width 1s ease-in-out;
    position: relative;
    width: 0%; /* Start at 0, will be set by JS */
    box-shadow: 0 0 10px rgba(67, 97, 238, 0.3);
}

.achievement-card.earned .progress-bar {
    background: linear-gradient(90deg, var(--success), #04b48c);
}

.progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
    animation: progressShine 2s infinite;
}

@keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
}

/* Show completion badge for earned achievements */
.completed-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--success);
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    box-shadow: 0 3px 10px rgba(6, 214, 160, 0.4);
    animation: bounce 2s infinite;
}
@keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
}

/* Unlocked text for earned achievements - POSITIONED AT BOTTOM */
.unlocked-text {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--success);
    color: white;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    box-shadow: 0 3px 10px rgba(6, 214, 160, 0.4);
    display: flex;
    align-items: center;
    gap: 6px;
    z-index: 10;
}


/* For unearned achievements, ensure progress section is visible */
.achievement-card:not(.earned) .completed-badge,
.achievement-card:not(.earned) .unlocked-text {
    display: none;
}

.achievement-card.earned .progress-stats {
    display: none;
}
.achievement-card.earned .achievement-description {
    margin-bottom: 50px;
}



/* === RESPONSIVE DESIGN === */
/* Tablet */
@media (max-width: 768px) {

    .achievements-grid {

        grid-template-columns: 1fr;

        gap: 16px;

    }

    

    .achievement-card {

        padding: 20px;

        min-height: 200px;

    }


    .achievement-icon-container {

        width: 60px;

        height: 60px;

    }

    

    .achievement-icon {

        font-size: 1.8rem;

    }

    

    .achievement-name {

        font-size: 1.2rem;

    }

}
/* Mobile */
@media (max-width: 768px) {

    .achievements-header {

        flex-direction: column;

        align-items: center;

        text-align: center;

        gap: 15px;

    }

    

    .achievements-grid {

        grid-template-columns: 1fr;

        gap: 16px;

        margin-top: 16px;

    }

    

    .achievement-card {

        padding: 20px;

        min-height: 160px;

        border-radius: 14px;

    }

    

    .achievement-header {

        gap: 14px;

        margin-bottom: 14px;

    }

    

    .achievement-icon-container {

        width: 50px;

        height: 50px;

        border-radius: 10px;

    }

    

    .achievement-icon {

        font-size: 1.5rem;

    }

    

    .achievement-name {

        font-size: 1.1rem;

        margin-bottom: 5px;

    }

    

    .achievement-description {

        font-size: 0.85rem;

        margin-bottom: 6px;

    }

    

    .progress-stats {

        font-size: 0.85rem;

        margin-bottom: 6px;

    }

    

    .progress-container {

        height: 6px;

    }

    

    .completed-badge {

        top: 12px;

        right: 12px;

        width: 20px;

        height: 20px;

        font-size: 0.7rem;

    }

}

/* Very small screens */
@media (max-width: 480px) {

    .achievement-card {

        padding: 16px;

        min-height: 150px;

    }

    

    .achievement-header {

        gap: 12px;

    }

    

    .achievement-icon-container {

        width: 45px;

        height: 45px;

    }

    

    .achievement-icon {

        font-size: 1.3rem;

    }

    

    .achievement-name {

        font-size: 1rem;

    }

    

    .achievement-description {

        font-size: 0.8rem;

    }

}

/* Empty state styling */
.achievements-empty-state {

    text-align: center;

    padding: 60px 20px;

    color: var(--gray);

    grid-column: 1 / -1;

}

.achievements-empty-state i {

    font-size: 4rem;

    margin-bottom: 20px;

    color: var(--border);

    opacity: 0.5;

}

.achievements-empty-state h3 {

    color: var(--accent);

    margin-bottom: 12px;

    font-size: 1.5rem;

}

.achievements-empty-state p {

    font-size: 1rem;

    max-width: 400px;

    margin: 0 auto;

    line-height: 1.5;

}

/* Landscape mode optimization */
@media (max-width: 768px) and (orientation: landscape) {

    .achievements-grid {

        grid-template-columns: repeat(2, 1fr);

    }

}
        
        /* REDESIGNED Focus Mode Tab Styles */
        .focus-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .focus-session-setup {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
        }
        
        .focus-session-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .focus-session-controls {
                grid-template-columns: 1fr;
            }
        }
        
        .duration-selector {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .duration-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .duration-option {
            padding: 12px;
            background: var(--dark);
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .duration-option:hover {
            background: rgba(67, 97, 238, 0.1);
            border-color: var(--primary);
        }
        
        .duration-option.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        .start-session-btn {
            width: 100%;
            padding: 16px;
            font-size: 1.1rem;
            margin-top: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .start-session-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.4);
        }
        
        .start-session-btn:active {
            transform: translateY(-1px);
        }
        
        /* Focus Session Active View */
        .focus-session-active {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--background);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .focus-session-active.active {
            display: flex;
        }
        
        .focus-timer-display {
            font-size: 6rem;
            font-weight: 700;
            color: var(--accent);
            margin: 20px 0;
            text-shadow: 0 0 15px var(--glow);
            font-family: 'Courier New', monospace;
        }
        
        .focus-task-display {
            font-size: 1.5rem;
            color: var(--text);
            margin-bottom: 30px;
            text-align: center;
            max-width: 600px;
            line-height: 1.4;
        }
        
        .focus-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .focus-control-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .focus-control-btn.pause {
            background: var(--warning);
            color: white;
        }
        
        .focus-control-btn.end {
            background: var(--dark);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .focus-control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .focus-history-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
        }
        
        .focus-history-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .focus-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: var(--dark);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
        }
        
        .focus-history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .focus-history-info {
            flex: 1;
        }
        
        .focus-history-task {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .focus-history-date {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .focus-history-duration {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.1rem;
        }
        
        .no-focus-history {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .no-focus-history i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--border);
        }
        
        /* Settings Tab Styles */
        .settings-section {
            margin-bottom: 30px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-info {
            flex: 1;
        }
        
        .setting-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .setting-desc {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .data-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .data-stat {
            background: var(--dark);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .data-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .data-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* About Creator Section */
        .about-creator {
            margin-top: 30px;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border);
            text-align: center;
        }
        
        .creator-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .creator-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .creator-description {
            margin-bottom: 20px;
            color: var(--gray);
        }
        
        .creator-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .creator-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--dark);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .creator-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .creator-signature {
            margin-top: 20px;
            font-style: italic;
            color: var(--accent);
        }
        
        
        /* Enhanced Modal Styles */
/* Enhanced Modal Styles with Smooth Transitions */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(5px);
}

.modal.active {
    display: flex;
    opacity: 1;
}

.modal-content {
    background: var(--card-bg);
    border-radius: 20px;
    width: 95%;
    max-width: 800px;
    max-height: 90vh;
    padding: 30px;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
}

.modal.active .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary), var(--accent), var(--success));
    animation: headerGlow 3s ease-in-out infinite alternate;
}

@keyframes modalAppear {
    to { 
        transform: scale(1) translateY(0);
        opacity: 1;
    }
}

/* Enhanced close button */
.close-modal {
    background: var(--dark);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.close-modal:hover {
    background: var(--warning);
    color: white;
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 6px 20px rgba(239, 71, 111, 0.4);
}

.close-modal:active {
    transform: rotate(90deg) scale(0.95);
}
        
        /* Add Form Styles */
        .add-form-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 200;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .add-form-container.active {
            display: flex;
        }
        
        .add-form-content {
            background: var(--card-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            animation: modalAppear 0.3s ease forwards;
            position: relative;
            overflow: hidden;
        }
        
        .add-form-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .close-add-form {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .close-add-form:hover {
            color: var(--warning);
            transform: rotate(90deg);
        }
        
        /* Floating Button - REMOVED */
        .floating-add-btn {
            display: none !important;
        }
        
        /* Footer */
        footer {
            margin-top: 40px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--success));
        }
        
        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .footer-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .footer-description {
            margin-bottom: 20px;
            color: var(--gray);
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--dark);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .social-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s;
        }
        
        .social-link:hover::before {
            left: 100%;
        }
        
        .social-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .signature {
            margin-top: 20px;
            font-style: italic;
            color: var(--accent);
        }

        /* NEW STYLES FOR IMPROVEMENTS */

        /* Edit Playlist Button */
        .btn-edit-playlist {
            background-color: var(--accent);
            color: var(--dark);
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        /* Timer Slider Styles */
        .timer-slider-container {
            margin: 25px 0;
            padding: 20px;
            background: var(--dark);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .timer-slider {
            width: 100%;
            height: 40px;
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            outline: none;
            margin: 15px 0;
        }

        .timer-slider::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            cursor: pointer;
        }

        .timer-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 209, 102, 0.5);
            border: 2px solid var(--dark);
            transition: all 0.2s ease;
        }

        .timer-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(255, 209, 102, 0.8);
        }

        .timer-slider::-moz-range-track {
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            cursor: pointer;
            border: none;
        }

        .timer-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 209, 102, 0.5);
            border: 2px solid var(--dark);
            transition: all 0.2s ease;
        }

        .timer-slider::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(255, 209, 102, 0.8);
        }

        .slider-marks {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding: 0 5px;
        }

        .slider-mark {
            font-size: 0.8rem;
            color: var(--gray);
            position: relative;
        }

        .slider-mark::before {
            content: '';
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 8px;
            background: var(--gray);
            border-radius: 1px;
        }

        .slider-value-display {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent);
            margin-top: 10px;
        }

        /* Quick Timer Buttons */
        .quick-timer-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .quick-timer-btn {
            padding: 12px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .quick-timer-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .quick-timer-btn.active {
            background: var(--accent);
            color: var(--dark);
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(255, 209, 102, 0.3);
        }

        /* Settings Additional Options */
        .settings-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .settings-option-card {
            background: var(--dark);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .settings-option-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border-color: var(--accent);
        }

        .settings-option-icon {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 15px;
        }

        .settings-option-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text);
        }

        .settings-option-desc {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Streak Modal */
        .streak-modal {
            display: none;
        }

        .streak-modal.active {
            display: flex;
        }

        /* Video Stats Display */
        .video-stats {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .video-stats .completed {
            color: var(--success);
            font-weight: 600;
        }

        .video-stats .total {
            color: var(--text);
        }

        /* Edit Playlist Modal */
        .edit-playlist-modal {
            display: none;
        }

        .edit-playlist-modal.active {
            display: flex;
        }

        /* Enhanced Edit Videos Modal */
        .edit-videos-modal {
            display: none;
        }

        .edit-videos-modal.active {
            display: flex;
        }

        /* Look for the existing video-edit styles */
/* Video Edit List Container */
.video-edit-list {
    max-height: 400px;
    overflow-y: auto;
    margin: 20px 0;
    padding: 5px;
}

/* Video Edit Item - Cleaner Style */
.video-edit-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    margin-bottom: 12px;
    background: var(--card-bg);
    border-radius: 10px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
    position: relative;
}

.video-edit-item:hover {
    transform: translateX(5px);
    border-color: var(--primary);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.video-edit-input {
    flex: 1;
    padding: 12px 15px;
    background: var(--dark);
    border: 2px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-size: 0.95rem;
    transition: all 0.3s ease;
}

.video-edit-input:focus {
    border-color: var(--primary);
    outline: none;
    box-shadow: 0 0 0 3px var(--glow);
}

.video-edit-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* Button Consistency */
.btn-small {
    padding: 8px 12px;
    font-size: 0.85rem;
    min-width: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Delete button - subtle red */
.btn-danger {
    background: rgba(239, 71, 111, 0.2);
    color: var(--warning);
    border: 1px solid rgba(239, 71, 111, 0.3);
}

.btn-danger:hover {
    background: var(--warning);
    color: white;
    transform: scale(1.05);
}

        

        /* NEW: Suggestions Section in Settings */
        .suggestions-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .suggestion-item {
            background: var(--dark);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .suggestion-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border-color: var(--accent);
        }

        .suggestion-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .suggestion-icon {
            font-size: 1.5rem;
            color: var(--accent);
        }

        .suggestion-title {
            font-weight: 600;
            color: var(--text);
            font-size: 1.1rem;
        }

        .suggestion-description {
            color: var(--gray);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .suggestion-actions {
            display: flex;
            gap: 10px;
        }

        /* NEW: Dashboard Achievements Section */
        .dashboard-achievements {
            margin-top: 30px;
        }

        .dashboard-achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .dashboard-achievement-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid var(--accent);
            box-shadow: 0 0 20px var(--tab-glow);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .dashboard-achievement-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, var(--glow), transparent);
            opacity: 0.2;
        }

        .dashboard-achievement-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: var(--accent);
            animation: bounce 2s infinite;
        }

        .dashboard-achievement-name {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1rem;
            color: var(--accent);
        }

        .dashboard-achievement-desc {
            font-size: 0.8rem;
            color: var(--gray);
            line-height: 1.3;
        }

        .no-achievements {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .no-achievements i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--border);
        }

        /* NEW: Improved Stats Cards */
        .stat-card.percentage-card .stat-number {
            font-size: 2.2rem;
            font-weight: 800;
        }

        .stat-card.percentage-card .stat-icon {
            font-size: 2.5rem;
        }

        /* Responsive fixes for playlist actions */
        @media (max-width: 768px) {
            .playlist-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .playlist-actions {
                width: 100%;
                justify-content: flex-start;
            }
            
            .playlist-title {
                width: 100%;
            }
        }
        /* === SIDEBAR NAVIGATION === */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  height: 100vh;
  background: var(--card-bg);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  padding: 25px 0;
  box-shadow: 5px 0 20px rgba(0, 0, 0, 0.2);
  z-index: 200;
  transition: all 0.3s ease;
}

.sidebar-logo {
  text-align: center;
  color: var(--accent);
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  margin-bottom: 30px;
}

.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 15px;
}

.sidebar-tab {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 12px 18px;
  border-radius: 10px;
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.sidebar-tab i {
  font-size: 1.3rem;
  color: var(--accent);
}

.sidebar-tab:hover {
  background: rgba(255, 255, 255, 0.05);
  transform: translateX(5px);
}

.sidebar-tab.active {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  box-shadow: 0 0 10px var(--tab-glow);
}

.sidebar-tab.active i {
  color: white; /* Changed from #0095f6 to white for consistency */
}

/* Adjust main container to avoid overlap */
.container {
  margin-left: 260px;
  transition: all 0.3s ease;
}
/* === IMPROVED MOBILE NAVIGATION (ICON-ONLY) === */
@media (max-width: 768px) {
  .sidebar {
    position: fixed;
    bottom: 0;
    top: auto;
    width: 100%;
    height: auto;
    flex-direction: row;
    justify-content: space-around;
    padding: 15px 0;
    border-top: 1px solid var(--border);
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
    background: var(--card-bg);
    z-index: 1000;
    padding-bottom: calc(15px + env(safe-area-inset-bottom, 0px));
  }

  .sidebar-nav {
    flex-direction: row;
    gap: 0;
    width: 100%;
    justify-content: space-around;
    padding: 0 15px;
  }

  .sidebar-tab {
    flex-direction: column;
    gap: 0;
    font-size: 0.75rem;
    padding: 10px 5px;
    flex: 1;
    min-width: 0;
    max-width: 70px;
    text-align: center;
    border-radius: 12px;
    transition: all 0.3s ease;
    margin: 0 2px;
  }

  /* HIDE ALL TEXT LABELS */
  .sidebar-tab span {
    display: none !important;
  }

  .sidebar-tab i {
    font-size: 1.6rem;
    color: var(--gray);
    transition: all 0.3s ease;
    margin-bottom: 0;
  }

  .sidebar-tab.active {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
  }

  .sidebar-tab.active i {
    color: white;
    transform: scale(1.1);
  }

  .sidebar-tab:active {
    transform: scale(0.95);
  }

  .sidebar-logo {
    display: none;
  }

  .container {
    margin-left: 0;
    margin-bottom: 80px; /* Space for mobile nav */
    padding-bottom: 20px;
  }

  /* Ensure content doesn't get hidden behind navigation */
  body {
    padding-bottom: 20px;
  }
}

/* Additional improvements for very small screens */
@media (max-width: 380px) {
  .sidebar-tab {
    padding: 8px 4px;
  }

  .sidebar-tab i {
    font-size: 1.4rem;
  }
}

/* For landscape mode on mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .sidebar {
    padding: 10px 0;
    padding-bottom: calc(10px + env(safe-area-inset-bottom, 0px));
  }

  .sidebar-tab {
    flex-direction: column;
    padding: 8px 5px;
  }

  .sidebar-tab i {
    font-size: 1.4rem;
  }

  .container {
    margin-bottom: 70px;
  }
}

/* Edit Playlist Modal - Clean Layout */
.edit-playlist-modal .modal-content {
    max-width: 600px;
}
/* Compact Add Playlist Button Hover */
#addPlaylistBtn {
    transition: all 0.3s ease;
}

#addPlaylistBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
}

/* FIX DAY LABEL MISALIGNMENT */
.day-labels-container,
.bars-container {
    padding: 0 0 !important;     /* remove extra padding */
    gap: 8px !important;         /* same spacing */
}

.timeline-chart-wrapper {
    padding: 0 15px;             /* equal padding around graph */
}

.day-labels-container {
    margin-top: 10px !important; /* reduce unnecessary space */
}

/* Fix for 100% completion shadow issue */

.stat-card {
    background: linear-gradient(135deg, var(--card-bg), var(--dark)) !important;
    border-radius: 16px !important;
    padding: 25px 20px !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2) !important;
}

/* Remove the problematic background override */
#goalsProgressCard {
    background: linear-gradient(135deg, var(--card-bg), var(--dark)) !important;
}

/* Fix circular progress container positioning */
.circular-progress-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto 15px auto;
}

/* Enhanced 100% completion styling */
.circular-progress-fill.complete {
    filter: drop-shadow(0 0 6px var(--success)) !important;
    stroke: var(--success) !important;
    stroke-width: 8 !important;
}

.circular-progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--accent);
    transition: all 0.3s ease;
}

.circular-progress-fill.complete + .circular-progress-text {
    color: var(--success) !important;
    text-shadow: 0 0 8px rgba(6, 214, 160, 0.3);
}

    </style>
<base target="_blank">
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Achieve-mate</h1>
                <p class="tagline">Stop planning - Start progressing</p>
            </div>
            <div class="streak-header" id="streakHeader">
                <i class="fas fa-fire fire-icon"></i>
                <div class="streak-number" id="headerStreakCount">0</div>
                <div class="streak-label">Day Streak</div>
            </div>
        </header>
        
        <aside class="sidebar">
  <div class="sidebar-logo">
    <h2><i class="fas fa-graduation-cap"></i> Achieve-mate</h2>
  </div>
  <nav class="sidebar-nav">
    <div class="sidebar-tab active" data-tab="dashboard">
      <i class="fas fa-tachometer-alt"></i>
      <span>Dashboard</span>
    </div>
    <div class="sidebar-tab" data-tab="courses">
      <i class="fas fa-play-circle"></i>
      <span>Courses</span>
    </div>
    <div class="sidebar-tab" data-tab="goals">
      <i class="fas fa-bullseye"></i>
      <span>Today's Goals</span>
    </div>
    <div class="sidebar-tab" data-tab="achievements">
      <i class="fas fa-trophy"></i>
      <span>Achievements</span>
    </div>
    <div class="sidebar-tab" data-tab="focus">
      <i class="fas fa-clock"></i>
      <span>Focus Mode</span>
    </div>
    <div class="sidebar-tab" data-tab="settings">
      <i class="fas fa-cog"></i>
      <span>Settings</span>
    </div>
  </nav>
</aside>

        
        
        
        <div class="nav-content active" id="dashboard-content">
            <div class="app-container">
                <div class="left-panel">
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-tasks"></i> Today's Goals</h2>
                        <div class="today-goals" id="todayGoals">
                            </div>
                    </div>
                </div>
                
                <div class="right-panel">
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-chart-line"></i> Quick Stats</h2>
                        <div class="stats-container">



    <div class="stat-card">

        <div class="circular-progress-container">

            <svg class="circular-progress" width="120" height="120" viewBox="0 0 120 120">

                <circle class="circular-progress-bg" cx="60" cy="60" r="54" />

                <circle class="circular-progress-fill" id="topicsProgressCircle" cx="60" cy="60" r="54" />

            </svg>

            <div class="circular-progress-text" id="videosPercentage">0%</div>

        </div>

        <div class="stat-label">Topics Done</div>

    </div>

    <div class="stat-card" id="goalsProgressCard">

        <div class="circular-progress-container">

            <svg class="circular-progress" width="120" height="120" viewBox="0 0 120 120">

                <circle class="circular-progress-bg" cx="60" cy="60" r="54" />

                <circle class="circular-progress-fill" id="goalsProgressCircle" cx="60" cy="60" r="54" />

            </svg>

            <div class="circular-progress-text" id="todayGoalsPercentage">0%</div>

        </div>

        <div class="stat-label">Today's Goals</div>

    </div>

</div>
                    </div>

                    <div class="card dashboard-achievements">
                        <h2 class="card-title"><i class="fas fa-trophy"></i> Recent Achievements</h2>
                        <p>Your unlocked badges and milestones</p>
                        
                        <div class="dashboard-achievements-grid" id="dashboardAchievementsGrid">
                            <div class="no-achievements">
                                <i class="fas fa-trophy"></i>
                                <h3>No Achievements Yet</h3>
                                <p>Complete tasks to unlock achievements</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="about-creator">
                        <div class="creator-content">
                            <h3 class="creator-title">Achieve-mate</h3>
                            <p class="creator-description">
                                Created by Deepak, Achieve-mate turns your learning path into a story of growth — helping you stay focused, measure progress, and transform goals into achievements.
                            </p>
                            <div class="creator-links">
                                <a href="https://github.com/deepakjha67" target="_blank" class="creator-link">
                                    <i class="fab fa-github"></i>
                                    <span>GitHub</span>
                                </a>
                                <a href="https://www.linkedin.com/in/deepak-kumar-jha-390694281" target="_blank" class="creator-link">
                                    <i class="fab fa-linkedin"></i>
                                    <span>LinkedIn</span>
                                </a>
                            </div>
                            <p class="creator-signature">Stay Consistent, Keep Learning</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-content" id="courses-content">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-play-circle"></i> My Courses & Playlists</h2>
                
                <div style="margin-bottom: 20px; text-align: right;">
    <button class="btn-primary" id="addPlaylistBtn" style="padding: 10px 20px; font-size: 0.95rem;">
        <i class="fas fa-plus"></i> Add Playlist
    </button>
</div>
                
                <div class="tabs-container" id="tabsContainer" data-active-tab="all">
                    <div class="tab active" data-tab="all">All Playlists</div>
                    <div class="tab" data-tab="in-progress">In Progress</div>
                    <div class="tab" data-tab="completed">Completed</div>
                </div>
                
                <div class="tab-content active" id="all-tab">
                    <div id="playlistsContainer">
                        <div class="create-first-playlist" id="createFirstPlaylist">
                            <i class="fas fa-plus-circle"></i>
                            <h3>Create Your First Playlist</h3>
                            <p>Start your learning journey by creating a playlist of videos or topics you want to master.</p>
                            <button class="btn-primary" id="createPlaylistBtn">
                                <i class="fas fa-plus"></i> Create Playlist
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="in-progress-tab">
                    <div id="inProgressContainer">
                        <div class="empty-state">
                            <i class="fas fa-spinner"></i>
                            <h3>No Playlists in Progress</h3>
                            <p>Start learning to see your in-progress playlists here</p>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="completed-tab">
                    <div id="completedContainer">
                        <div class="empty-state">
                            <i class="fas fa-check-circle"></i>
                            <h3>No Completed Playlists</h3>
                            <p>Complete your playlists to see them here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-content" id="goals-content">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-bullseye"></i> Today's Goals</h2>
                <p>Set and track your daily learning objectives</p>
                
                <div class="goal-form">
                    <div class="form-group">
                        <label for="goalTitle">Goal Title</label>
                        <input type="text" id="goalTitle" placeholder="e.g., Complete React Hooks tutorial">
                    </div>
                    
                    <button class="btn-primary" id="addGoal">
                        <i class="fas fa-plus"></i> Add Goal
                    </button>
                </div>
                
                <div class="today-goals" id="goalsList">
                    </div>
            </div>
            
            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-bar"></i> Progress Timeline</h2>
                <div class="timeline-container">
                    <div class="timeline-header">
                    </div>
                    <div class="timeline-chart" id="timelineChart">
                        <div class="y-axis">
                            <div class="y-axis-label">100%</div>
                            <div class="y-axis-label">75%</div>
                            <div class="y-axis-label">50%</div>
                            <div class="y-axis-label">25%</div>
                            <div class="y-axis-label">0%</div>
                        </div>
                        </div>
                </div>
            </div>
        </div>
        
        <div class="nav-content" id="achievements-content">
            <div class="card">
                <div class="achievements-header">
                    <div>
                        <h2 class="card-title"><i class="fas fa-trophy"></i> Achievements</h2>
                        <p>Earn badges by reaching learning milestones</p>
                    </div>
                    <div class="achievements-count-badge">
                        <i class="fas fa-trophy"></i>
                        <span id="earnedCount">0</span>/<span id="totalCount">17</span> Earned
                    </div>
                </div>
                
                <div class="achievements-filter">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="streak">Streaks</button>
                    <button class="filter-btn" data-filter="playlist">Playlists</button>
                    <button class="filter-btn" data-filter="focus">Focus Time</button>
                </div>
                
                <div class="achievements-grid" id="achievementsGrid">
                    </div>
            </div>
        </div>
        
        <!-- REDESIGNED FOCUS MODE TAB -->
        <div class="nav-content" id="focus-content">
            <div class="focus-container">
                <div class="focus-session-setup">
                    <h2 class="card-title"><i class="fas fa-clock"></i> Start Study Session</h2>
                    <p>Set up your focus session for distraction-free studying</p>
                    
                    <div class="form-group">
                        <label for="focusTask">Task Name</label>
                        <input type="text" id="focusTask" placeholder="What are you working on?">
                    </div>
                    
                    <div class="focus-session-controls">
                        <div class="duration-selector">
                            <label>Session Duration</label>
                            <div class="duration-options">
                                <div class="duration-option active" data-minutes="25">25 min</div>
                                <div class="duration-option" data-minutes="45">45 min</div>
                                <div class="duration-option" data-minutes="60">60 min</div>
                                <div class="duration-option" data-minutes="90">90 min</div>
                                <div class="duration-option" data-minutes="120">120 min</div>
                                <div class="duration-option" data-minutes="0">Custom</div>
                            </div>
                        </div>
                        
                        <div class="custom-duration" id="customDuration" style="display: none;">
                            <label for="customMinutes">Custom Duration (minutes)</label>
                            <input type="number" id="customMinutes" min="5" max="240" value="30">
                        </div>
                    </div>
                    
                    <button class="start-session-btn" id="startFocusSession">
                        <i class="fas fa-play"></i> Start Focus Session
                    </button>
                </div>
                
                <div class="focus-history-section">
                    <h2 class="card-title"><i class="fas fa-history"></i> Focus History</h2>
                    <p>Your recent focus sessions</p>
                    
                    <div class="focus-history-list" id="focusHistoryList">
                        <div class="no-focus-history">
                            <i class="fas fa-clock"></i>
                            <h3>No Focus Sessions Yet</h3>
                            <p>Start your first focus session to see it here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FOCUS SESSION ACTIVE VIEW -->
        <div class="focus-session-active" id="focusSessionActive">
            <div class="focus-timer-display" id="focusTimerDisplay">25:00</div>
            <div class="focus-task-display" id="focusTaskDisplay">Working on: No task selected</div>
            
            <div class="focus-controls">
                <button class="focus-control-btn pause" id="pauseFocusSession">
                    <i class="fas fa-pause"></i> Pause
                </button>
                <button class="focus-control-btn end" id="endFocusSession">
                    <i class="fas fa-stop"></i> End Session
                </button>
            </div>
        </div>
        
        <div class="nav-content" id="settings-content">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-cog"></i> Settings</h2>
                
                <div class="settings-section">
                    <h3 style="margin-bottom: 15px;">App Settings</h3>
                    
                    <div class="settings-options">
                        <div class="settings-option-card" id="reportBugBtn">
                            <div class="settings-option-icon">
                                <i class="fas fa-bug"></i>
                            </div>
                            <div class="settings-option-title">Report a Bug</div>
                            <div class="settings-option-desc">Found an issue? Let us know</div>
                        </div>
                        
                        <div class="settings-option-card" id="writeReviewBtn">
                            <div class="settings-option-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="settings-option-title">Write a Review</div>
                            <div class="settings-option-desc">Share your experience with us</div>
                        </div>
                    </div>
                </div>
                
                <div class="suggestions-section">
                    <h3 style="margin-bottom: 15px;">Suggestions & Feedback</h3>
                    <p style="color: var(--gray); margin-bottom: 20px;">
                        Help us improve Achieve-mate by sharing your ideas and suggestions
                    </p>
                    
                    <div class="suggestion-item">
                        <div class="suggestion-header">
                            <i class="fas fa-lightbulb suggestion-icon"></i>
                            <div class="suggestion-title">Feature Request</div>
                        </div>
                        <div class="suggestion-description">
                            Have an idea for a new feature? Let us know what would make your learning experience better.
                        </div>
                        <div class="suggestion-actions">
                            <button class="btn-primary" id="suggestFeatureBtn">
                                <i class="fas fa-envelope"></i> Suggest Feature
                            </button>
                        </div>
                    </div>
                    
                    <div class="suggestion-item">
                        <div class="suggestion-header">
                            <i class="fas fa-paint-brush suggestion-icon"></i>
                            <div class="suggestion-title">Design Improvement</div>
                        </div>
                        <div class="suggestion-description">
                            Noticed something that could look better? Share your design suggestions with us.
                        </div>
                        <div class="suggestion-actions">
                            <button class="btn-primary" id="suggestDesignBtn">
                                <i class="fas fa-envelope"></i> Suggest Improvement
                            </button>
                        </div>
                    </div>
                    
                    <div class="suggestion-item">
                        <div class="suggestion-header">
                            <i class="fas fa-mobile-alt suggestion-icon"></i>
                            <div class="suggestion-title">Mobile Experience</div>
                        </div>
                        <div class="suggestion-description">
                            How can we improve the mobile experience? Share your thoughts on the app's responsiveness.
                        </div>
                        <div class="suggestion-actions">
                            <button class="btn-primary" id="suggestMobileBtn">
                                <i class="fas fa-envelope"></i> Share Feedback
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 style="margin-bottom: 15px;">Data Management</h3>
                    
                    <div class="data-stats">
                        <div class="data-stat">
                            <div class="data-value" id="dataSize">0 KB</div>
                            <div class="data-label">Data Size</div>
                        </div>
                        <div class="data-stat">
                            <div class="data-value" id="lastExport">Never</div>
                            <div class="data-label">Last Export</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <p style="color: var(--gray); margin-bottom: 15px; font-size: 0.9rem;">
                            <i class="fas fa-info-circle"></i> Regular backups ensure you don't lose your progress
                        </p>
                        
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn-primary" id="exportData">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                            <button class="btn-success" id="importData">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                            <button class="btn-warning" id="clearData">
                                <i class="fas fa-trash"></i> Clear All Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="floating-add-btn hidden" id="floatingAddBtn">
        <i class="fas fa-plus"></i>
    </div>
    
    <div class="add-form-container" id="addFormContainer">
        <div class="add-form-content">
            <button class="close-add-form" id="closeAddForm">&times;</button>
            <h2 class="card-title"><i class="fas fa-plus-circle"></i> Add New Playlist</h2>
            <form id="playlistForm">
                <div class="form-group">
                    <label for="playlistName">Playlist Name</label>
                    <input type="text" id="playlistName" placeholder="e.g., JavaScript Fundamentals" required>
                </div>
                
                <div class="form-group">
                    <label for="playlistSource">Source</label>
                    <select id="playlistSource">
                        <option value="youtube">YouTube</option>
                        <option value="udemy">Udemy</option>
                        <option value="coursera">Coursera</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="playlistUrl">Playlist URL (Optional)</label>
                    <input type="url" id="playlistUrl" placeholder="https://www.youtube.com/playlist?list=...">
                </div>
                
                <div class="form-group">
                    <label for="videosData">Video List (One per line)</label>
                    <textarea id="videosData" rows="6" placeholder="Enter video titles, one per line&#10;e.g.,&#10;Introduction to JavaScript&#10;Variables and Data Types&#10;Functions and Scope&#10;..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Save Playlist</button>
                    <button type="button" class="btn-warning" id="cancelAddForm">Cancel</button>
                </div>
            </form>
        </div>
    </div>

<!-- calendar modal – always in DOM -->
<div class="modal calendar-modal" id="streakModal">
  <div class="modal-content calendar-modal-content">
    <button class="close-modal" id="closeStreakModal">&times;</button>
    <!-- mobile-first layout: stack on small screens -->
    <div class="calendar-layout-container">
      <!-- LEFT: mini-calendar -->
      <section class="calendar-section">
        <div class="calendar-header">
          <button class="calendar-nav" id="prevMonth">&lt;</button>
          <h3 id="currentMonth">October 2025</h3>
          <button class="calendar-nav" id="nextMonth">&gt;</button>
        </div>
        <div class="calendar-grid" id="calendarDays"></div>
      </section>
      <!-- RIGHT: details for tapped day -->
      <section class="study-details-section">
        <div class="study-details-header">
          <h3><i class="fas fa-calendar-day"></i> <span id="selectedDateText">Pick a day</span></h3>
        </div>
        <!-- LEARNING TOPICS -->
        <div class="study-details-content" id="studyDetailsContent">
          <div class="empty-state">
            <i class="fas fa-book-open"></i>
            <p>Tap a date to see your progress</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>

    <div class="modal edit-playlist-modal" id="editPlaylistModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="card-title"><i class="fas fa-edit"></i> Edit Playlist</h2>
                <button class="close-modal" id="closeEditPlaylistModal">&times;</button>
            </div>
            <form id="editPlaylistForm">
                <input type="hidden" id="editPlaylistId">
                <div class="form-group">
                    <label for="editPlaylistName">Playlist Name</label>
                    <input type="text" id="editPlaylistName" required>
                </div>
                
                <div class="form-group">
                    <label for="editPlaylistSource">Source</label>
                    <select id="editPlaylistSource">
                        <option value="youtube">YouTube</option>
                        <option value="udemy">Udemy</option>
                        <option value="coursera">Coursera</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editPlaylistUrl">Playlist URL (Optional)</label>
                    <input type="url" id="editPlaylistUrl">
                </div>
                
                <div class="form-actions">
    <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Save Changes</button>
    <button type="button" class="btn-warning" id="deletePlaylistBtn">
        <i class="fas fa-trash"></i> Delete Playlist
    </button>
    <button type="button" class="btn-edit" id="editVideosBtn">
        <i class="fas fa-list"></i> Edit Videos
    </button>
</div>
            </form>
        </div>
    </div>

    <div class="modal edit-videos-modal" id="editVideosModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="card-title"><i class="fas fa-list"></i> Edit Videos</h2>
                <button class="close-modal" id="closeEditVideosModal">&times;</button>
            </div>
            <div class="video-edit-list" id="videoEditList">
                </div>
            <div class="form-actions">
    <button type="button" class="btn-primary" id="addVideoBtn">
        <i class="fas fa-plus"></i> Add Video
    </button>
    <button type="button" class="btn-warning" id="saveVideosBtn">
        <i class="fas fa-save"></i> Save Videos
    </button>
</div>
        </div>
    </div>

    <script>
        
        // Enhanced data structure
        const appData = {
            version: "2.1",
            playlists: JSON.parse(localStorage.getItem('learningPlaylists')) || [],
            streak: parseInt(localStorage.getItem('learningStreak')) || 0,
            lastCompletedDate: localStorage.getItem('lastCompletedDate') || '',
            studyHistory: JSON.parse(localStorage.getItem('studyHistory')) || {},
            dailyGoals: JSON.parse(localStorage.getItem('dailyGoals')) || [],
            goalProgress: JSON.parse(localStorage.getItem('goalProgress')) || {
                dailyCompletion: 0,
                weeklyAverage: 0,
                trends: []
            },
            achievements: JSON.parse(localStorage.getItem('achievements')) || {
                unlocked: [],
                progress: {}
            },
            focusHistory: JSON.parse(localStorage.getItem('focusHistory')) || [],
            totalFocusTime: parseFloat(localStorage.getItem('totalFocusTime')) || 0,
            settings: JSON.parse(localStorage.getItem('settings')) || {
                lastExport: null,
                autoBackup: false
            }
        };
        
        let expandedPlaylistId = null;
        let focusTimer = null;
        let focusTimeLeft = 25 * 60; // 25 minutes in seconds
        let isFocusRunning = false;
        let currentFocusTask = '';
        let focusSessionStartTime = null;
        let currentEditingPlaylistId = null;
        let selectedDuration = 25; // Default duration in minutes
        
        // DOM Elements
        const navTabs = document.querySelectorAll('.nav-tab, .sidebar-tab');
        const mobileNavTabs = document.querySelectorAll('.mobile-nav-tab');
        const navContents = document.querySelectorAll('.nav-content');
        const headerStreakCountEl = document.getElementById('headerStreakCount');
        const todayGoalsEl = document.getElementById('todayGoals');
        const calendarDays = document.getElementById('calendarDays');
        const currentMonthEl = document.getElementById('currentMonth');
        const playlistForm = document.getElementById('playlistForm');
        const playlistsContainer = document.getElementById('playlistsContainer');
        const inProgressContainer = document.getElementById('inProgressContainer');
        const completedContainer = document.getElementById('completedContainer');
        const createFirstPlaylist = document.getElementById('createFirstPlaylist');
        const createPlaylistBtn = document.getElementById('createPlaylistBtn');
        const addPlaylistBtn = document.getElementById('addPlaylistBtn');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const tabsContainer = document.getElementById('tabsContainer');
        const goalTitleEl = document.getElementById('goalTitle');
        const addGoalBtn = document.getElementById('addGoal');
        const goalsList = document.getElementById('goalsList');
        const timelineChartEl = document.getElementById('timelineChart');
        const achievementsGrid = document.getElementById('achievementsGrid');
        const dashboardAchievementsGrid = document.getElementById('dashboardAchievementsGrid');
        const focusTimerDisplay = document.getElementById('focusTimerDisplay');
        const focusTaskDisplay = document.getElementById('focusTaskDisplay');
        const focusTaskInput = document.getElementById('focusTask');
        const startFocusSessionBtn = document.getElementById('startFocusSession');
        const pauseFocusSessionBtn = document.getElementById('pauseFocusSession');
        const endFocusSessionBtn = document.getElementById('endFocusSession');
        const focusSessionActive = document.getElementById('focusSessionActive');
        const focusHistoryList = document.getElementById('focusHistoryList');
        const dataSizeEl = document.getElementById('dataSize');
        const lastExportEl = document.getElementById('lastExport');
        const exportDataBtn = document.getElementById('exportData');
        const importDataBtn = document.getElementById('importData');
        const clearDataBtn = document.getElementById('clearData');
        const floatingAddBtn = document.getElementById('floatingAddBtn');
        const addFormContainer = document.getElementById('addFormContainer');
        const closeAddForm = document.getElementById('closeAddForm');
        const cancelAddForm = document.getElementById('cancelAddForm');
        const streakHeader = document.getElementById('streakHeader');
        const streakModal = document.getElementById('streakModal');
        const closeStreakModal = document.getElementById('closeStreakModal');
        const durationOptions = document.querySelectorAll('.duration-option');
        const customDurationContainer = document.getElementById('customDuration');
        const customMinutesInput = document.getElementById('customMinutes');
        const reportBugBtn = document.getElementById('reportBugBtn');
        const writeReviewBtn = document.getElementById('writeReviewBtn');
        const editPlaylistModal = document.getElementById('editPlaylistModal');
        const closeEditPlaylistModal = document.getElementById('closeEditPlaylistModal');
        const editPlaylistForm = document.getElementById('editPlaylistForm');
        const deletePlaylistBtn = document.getElementById('deletePlaylistBtn');
        const editVideosBtn = document.getElementById('editVideosBtn');
        const editVideosModal = document.getElementById('editVideosModal');
        const closeEditVideosModal = document.getElementById('closeEditVideosModal');
        const videoEditList = document.getElementById('videoEditList');
        const addVideoBtn = document.getElementById('addVideoBtn');
        const saveVideosBtn = document.getElementById('saveVideosBtn');
        const suggestFeatureBtn = document.getElementById('suggestFeatureBtn');
        const suggestDesignBtn = document.getElementById('suggestDesignBtn');
        const suggestMobileBtn = document.getElementById('suggestMobileBtn');
        
        // Initialize the app
        function init() {
            updateStats();
            renderPlaylists();
            updateStreak();
            generateCalendar();
            renderTodayGoals();
            renderGoals();
            renderTimeline();
            renderAchievements();
            renderDashboardAchievements();
            renderFocusHistory();
            updateDataStats();
            setupAchievementFilters();
            
            // Set up event listeners for desktop navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', () => switchNavTab(tab.dataset.tab));
            });
            
            // Set up event listeners for mobile navigation
            mobileNavTabs.forEach(tab => {
                tab.addEventListener('click', () => switchNavTab(tab.dataset.tab));
            });
            
            playlistForm.addEventListener('submit', handlePlaylistSubmit);
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
            
            createPlaylistBtn.addEventListener('click', () => {
                addFormContainer.classList.add('active');
            });
            
            addPlaylistBtn.addEventListener('click', () => {
                addFormContainer.classList.add('active');
            });
            
            createFirstPlaylist.addEventListener('click', () => {
                addFormContainer.classList.add('active');
            });
            
            closeAddForm.addEventListener('click', () => {
                addFormContainer.classList.remove('active');
            });
            
            cancelAddForm.addEventListener('click', () => {
                addFormContainer.classList.remove('active');
            });
            
            addGoalBtn.addEventListener('click', addGoal);
            
            // Focus mode event listeners
            startFocusSessionBtn.addEventListener('click', startFocusSession);
            pauseFocusSessionBtn.addEventListener('click', pauseFocusSession);
            endFocusSessionBtn.addEventListener('click', endFocusSession);
            
            // Duration selection
            durationOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Update active state
                    durationOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    const minutes = parseInt(this.dataset.minutes);
                    
                    if (minutes === 0) {
                        // Show custom duration input
                        customDurationContainer.style.display = 'block';
                        selectedDuration = parseInt(customMinutesInput.value) || 30;
                    } else {
                        // Hide custom duration input
                        customDurationContainer.style.display = 'none';
                        selectedDuration = minutes;
                    }
                });
            });
            
            // Custom duration input
            customMinutesInput.addEventListener('input', function() {
                selectedDuration = parseInt(this.value) || 30;
            });
            
            exportDataBtn.addEventListener('click', exportData);
            importDataBtn.addEventListener('click', importData);
            clearDataBtn.addEventListener('click', clearAllData);
            
            
            // FIX: Cleaned up modal handling
            function openStreakModal() {
                streakModal.classList.add('active');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            }

            function closeStreakModalFunction() {
                streakModal.classList.remove('active');
                document.body.style.overflow = ''; // Restore scrolling
            }

            // Event listeners for the streak modal
            streakHeader.addEventListener('click', openStreakModal);
            closeStreakModal.addEventListener('click', closeStreakModalFunction);

            streakModal.addEventListener('click', (e) => {
                // Close if clicking on the modal backdrop (the parent)
                if (e.target === streakModal) {
                    closeStreakModalFunction();
                }
            });
            // END FIX: Cleaned up modal handling
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === addFormContainer) {
                    addFormContainer.classList.remove('active');
                }
                if (e.target === editPlaylistModal) {
                    editPlaylistModal.classList.remove('active');
                }
                if (e.target === editVideosModal) {
                    editVideosModal.classList.remove('active');
                }
            });

            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && streakModal.classList.contains('active')) {
                    closeStreakModalFunction();
                }
            });
            
            // Settings options
            reportBugBtn.addEventListener('click', reportBug);
            writeReviewBtn.addEventListener('click', writeReview);
            
            // Suggestion buttons
            suggestFeatureBtn.addEventListener('click', () => suggestImprovement('Feature Request'));
            suggestDesignBtn.addEventListener('click', () => suggestImprovement('Design Improvement'));
            suggestMobileBtn.addEventListener('click', () => suggestImprovement('Mobile Experience'));
            
            // Edit playlist functionality
            closeEditPlaylistModal.addEventListener('click', () => {
                editPlaylistModal.classList.remove('active');
            });
            
            editPlaylistForm.addEventListener('submit', handleEditPlaylistSubmit);
            
            deletePlaylistBtn.addEventListener('click', deletePlaylist);
            
            editVideosBtn.addEventListener('click', openEditVideosModal);
            
            // Edit videos modal functionality
            closeEditVideosModal.addEventListener('click', () => {
                editVideosModal.classList.remove('active');
            });
            
            addVideoBtn.addEventListener('click', addVideoToEditList);
            
            saveVideosBtn.addEventListener('click', saveEditedVideos);
            
            // Request notification permission
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            // Initial animation for dashboard on first load
            setTimeout(() => {
                updateStats();
                // Use requestAnimationFrame to ensure DOM is ready
                requestAnimationFrame(() => {
                    animateCircularProgress();
                });
            }, 800);
        }
        
        // Function to handle improvement suggestions
        function suggestImprovement(type) {
            const email = 'thedeepkjha4u@gmail.com';
            const subject = `Achieve-mate ${type} Suggestion`;
            const body = `I have a suggestion for ${type}:\n\n[Please describe your suggestion here]`;
            
            window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        }
        
        // Switch navigation tabs
        function switchNavTab(tabName) {
            // Update active desktop nav tab
            navTabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update active mobile nav tab
            mobileNavTabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update active nav content
            navContents.forEach(content => {
                if (content.id === `${tabName}-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            // Trigger circular progress animation if switching to dashboard
            if (tabName === 'dashboard') {
                // Calculate stats first
                updateStats();
                // Delay to ensure DOM is ready and visible
                setTimeout(() => {
                    animateCircularProgress();
                }, 150);
            }
        }
        
        // Update statistics
        function updateStats() {
            const totalVideos = appData.playlists.reduce((sum, playlist) => 
                sum + playlist.videos.length, 0);
            const completedVideos = appData.playlists.reduce((sum, playlist) => 
                sum + playlist.videos.filter(v => v.completed).length, 0);
            
            // Calculate today's goals completion
            const today = new Date().toDateString();
            const todayGoals = appData.dailyGoals.filter(goal => goal.date === today);
            const completedTodayGoals = todayGoals.filter(goal => goal.completed).length;
            const totalTodayGoals = todayGoals.length;
            
            // Calculate percentages
            const videosPercentage = totalVideos > 0 ? Math.round((completedVideos / totalVideos) * 100) : 0;
            const todayGoalsPercentage = totalTodayGoals > 0 ? Math.round((completedTodayGoals / totalTodayGoals) * 100) : 0;
            
            // Store target values in data attributes for animation
            document.getElementById('videosPercentage').dataset.target = videosPercentage;
            document.getElementById('todayGoalsPercentage').dataset.target = todayGoalsPercentage;
            
            // Update header streak
            headerStreakCountEl.textContent = appData.streak;
        }
        
        function animateCircularProgress() {
            // Get elements
            const topicsCircle = document.getElementById('topicsProgressCircle');
            const goalsCircle = document.getElementById('goalsProgressCircle');
            const topicsText = document.getElementById('videosPercentage');
            const goalsText = document.getElementById('todayGoalsPercentage');
            
            // Verify elements exist
            if (!topicsCircle || !goalsCircle) {
                console.error('Circular progress elements not found');
                return;
            }
            
            // Reset animations completely
            topicsCircle.classList.remove('animate-progress', 'complete');
            goalsCircle.classList.remove('animate-progress', 'complete');
            
            // Force DOM reflow to restart animations
            void topicsCircle.offsetWidth;
            void goalsCircle.offsetWidth;
            
            // Get target values from data attributes
            const videosPercentage = parseInt(topicsText.dataset.target) || 0;
            const goalsPercentage = parseInt(goalsText.dataset.target) || 0;
            
            // Calculate stroke dasharray (circumference = 2πr, r=54)
            const circumference = 2 * Math.PI * 54;
            const topicsProgress = (videosPercentage / 100) * circumference;
            const goalsProgress = (goalsPercentage / 100) * circumference;
            
            // Set CSS custom properties
            topicsCircle.style.setProperty('--progress', topicsProgress);
            goalsCircle.style.setProperty('--progress', goalsProgress);
            
            // Add animation class to trigger animation
            topicsCircle.classList.add('animate-progress');
            goalsCircle.classList.add('animate-progress');
            
            // Handle 100% completion styling
            if (videosPercentage === 100) {
                setTimeout(() => {
                    topicsCircle.classList.add('complete');
                    topicsText.style.color = 'var(--success)';
                }, 2500);
            }
            
            if (goalsPercentage === 100) {
                setTimeout(() => {
                    goalsCircle.classList.add('complete');
                    goalsText.style.color = 'var(--success)';
                }, 2500);
            }
            
            // Animate percentage text counting
            animatePercentageText(topicsText, 0, videosPercentage);
            animatePercentageText(goalsText, 0, goalsPercentage);
        }
        
        function animatePercentageText(element, start, end) {
            const duration = 2500;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth counting
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.floor(start + (end - start) * easeOutQuart);
                
                element.textContent = `${current}%`;
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            
            requestAnimationFrame(update);
        }
        
        // FIXED: Proper streak calculation
        function updateStreak(completedToday = false) {
            const today = new Date().toDateString();
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toDateString();
            
            // If we're completing something today
            if (completedToday) {
                // If last completion was yesterday, increment streak
                if (appData.lastCompletedDate === yesterdayString) {
                    appData.streak++;
                } 
                // If last completion was today, keep streak the same
                else if (appData.lastCompletedDate !== today) {
                    // If last completion wasn't today or yesterday, reset to 1
                    appData.streak = 1;
                }
                appData.lastCompletedDate = today;
            } else {
                // Check if streak should be reset (missed a day)
                if (appData.lastCompletedDate && appData.lastCompletedDate !== today && appData.lastCompletedDate !== yesterdayString) {
                    appData.streak = 0;
                }
            }
            
            // Save to localStorage
            localStorage.setItem('learningStreak', appData.streak);
            localStorage.setItem('lastCompletedDate', appData.lastCompletedDate);
            
            // Update UI
            headerStreakCountEl.textContent = appData.streak;
            
            // Check for streak achievements
            checkStreakAchievements();
        }
        
        // Render today's goals in dashboard
        function renderTodayGoals() {
            const today = new Date().toDateString();
            const todayGoals = appData.dailyGoals.filter(goal => goal.date === today);
            
            todayGoalsEl.innerHTML = '';
            
            if (todayGoals.length === 0) {
                todayGoalsEl.innerHTML = '<p style="text-align: center; color: var(--gray); padding: 20px;">No goals set for today</p>';
                return;
            }
            
            todayGoals.forEach(goal => {
                const goalEl = document.createElement('div');
                goalEl.className = 'goal-item';
                goalEl.innerHTML = `
                    <input type="checkbox" class="goal-checkbox" ${goal.completed ? 'checked' : ''} data-id="${goal.id}">
                    <div class="goal-text">${goal.title}</div>
                `;
                todayGoalsEl.appendChild(goalEl);
                
                // Add event listener for checkbox
                const checkbox = goalEl.querySelector('.goal-checkbox');
                checkbox.addEventListener('change', (e) => {
                    toggleGoalCompletion(goal.id, e.target.checked);
                });
            });
            
            updateStats();
        }
        
        // Toggle goal completion
        function toggleGoalCompletion(goalId, completed) {
            const goal = appData.dailyGoals.find(g => g.id === goalId);
            if (goal) {
                goal.completed = completed;
                localStorage.setItem('dailyGoals', JSON.stringify(appData.dailyGoals));
                renderTodayGoals();
                renderGoals();
                renderTimeline(); // Update timeline when goals change
                
                // Update streak if this is the first completion today
                if (completed) {
                    const today = new Date().toDateString();
                    const todayGoals = appData.dailyGoals.filter(g => g.date === today);
                    const completedTodayGoals = todayGoals.filter(g => g.completed);
                    
                    // If this is the first completion today, update streak
                    if (completedTodayGoals.length === 1) {
                        updateStreak(true);
                    }
                }
            }
        }
        
        // Generate calendar - using buildCalendar
        function generateCalendar() {
            buildCalendar();
        }
        
        // Add ripple animation to CSS (only if not already added)
        if (!document.querySelector('#ripple-animation')) {
            const style = document.createElement('style');
            style.id = 'ripple-animation';
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        
        // Format date for display
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        }
        
        // Handle playlist form submission
        function handlePlaylistSubmit(e) {
            e.preventDefault();
            
            const playlistName = document.getElementById('playlistName').value;
            const playlistSource = document.getElementById('playlistSource').value;
            const playlistUrl = document.getElementById('playlistUrl').value;
            const videosData = document.getElementById('videosData').value;
            
            // Create videos array from textarea
            const videoTitles = videosData.split('\n')
                .map(title => title.trim())
                .filter(title => title.length > 0);
            
            const videos = videoTitles.map((title, index) => ({
                id: Date.now() + index,
                title: title,
                completed: false,
                locked: index > 0, // Lock all videos except the first one
                url: playlistUrl ? `${playlistUrl}&index=${index+1}` : ''
            }));
            
            // Create new playlist
            const newPlaylist = {
                id: Date.now(),
                name: playlistName,
                source: playlistSource,
                url: playlistUrl,
                videos: videos,
                createdAt: new Date().toISOString(),
                progress: 0
            };
            
            // Add to playlists array
            appData.playlists.push(newPlaylist);
            
            // Save to localStorage
            savePlaylists();
            
            // Update UI
            updateStats();
            renderPlaylists();
            
            // Reset form and close modal
            playlistForm.reset();
            addFormContainer.classList.remove('active');
            
            // Check for first playlist achievement
            checkPlaylistAchievements();
        }
        
// Calculate achievement progress (FIXED VERSION)
function calculateAchievementProgress(achievement) {
    let current = 0;
    
    switch(achievement.type) {
        case 'streak':
            current = appData.streak;
            break;
        case 'playlist_count':
            current = appData.playlists.length;
            break;
        case 'completed_playlists':
            current = appData.playlists.filter(p => p.progress === 100).length;
            break;
        case 'focus_time':
            current = appData.totalFocusTime;
            break;
    }
    
    const progress = Math.min((current / achievement.target) * 100, 100);
    const earned = current >= achievement.target;
    
    return {
        current: current,
        progress: progress,
        earned: earned
    };
}
        
        // Render all playlists
        function renderPlaylists() {
            // Clear containers
            playlistsContainer.innerHTML = '';
            inProgressContainer.innerHTML = '';
            completedContainer.innerHTML = '';
            
            if (appData.playlists.length === 0) {
                createFirstPlaylist.style.display = 'block';
                return;
            }
            
            createFirstPlaylist.style.display = 'none';
            
            appData.playlists.forEach(playlist => {
                const playlistEl = createPlaylistElement(playlist);
                playlistsContainer.appendChild(playlistEl);
                
                // Add to appropriate tab container
                if (playlist.progress === 100) {
                    const completedEl = createPlaylistElement(playlist);
                    completedContainer.appendChild(completedEl);
                } else {
                    const inProgressEl = createPlaylistElement(playlist);
                    inProgressContainer.appendChild(inProgressEl);
                }
            });

            if (completedContainer.children.length === 0) {
                completedContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>No Completed Playlists</h3>
                        <p>Complete your playlists to see them here</p>
                    </div>
                `;
            }

            if (inProgressContainer.children.length === 0) {
                inProgressContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-spinner"></i>
                        <h3>No Playlists in Progress</h3>
                        <p>Start learning to see your in-progress playlists here</p>
                    </div>
                `;
            }
        }

        
        // Create playlist HTML element
        function createPlaylistElement(playlist) {
            const playlistEl = document.createElement('div');
            playlistEl.className = 'playlist-item';
            playlistEl.dataset.id = playlist.id;
            
            // Calculate progress
            const totalVideos = playlist.videos.length;
            const completedVideos = playlist.videos.filter(v => v.completed).length;
            const progress = totalVideos > 0 ? Math.round((completedVideos / totalVideos) * 100) : 0;
            
            // Check if this playlist is expanded
            const isExpanded = expandedPlaylistId === playlist.id;
            
            playlistEl.innerHTML = `
                <div class="playlist-header">
                    <div class="playlist-title">
                        <i class="fas fa-chevron-down expand-icon"></i>
                        <div class="playlist-title-text">${playlist.name}</div>
                    </div>
                    <div class="playlist-actions">
                        <button class="btn-edit-playlist" data-id="${playlist.id}">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        ${playlist.url ? `<a href="${playlist.url}" target="_blank" class="open-resource-btn"><i class="fas fa-external-link-alt"></i> Open</a>` : ''}
                    </div>
                </div>
                <div class="playlist-stats">
                    <span><i class="fas fa-play-circle"></i> ${completedVideos}/${totalVideos}</span>
                    <span><i class="fas fa-${getSourceIcon(playlist.source)}"></i> ${playlist.source}</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: ${progress}%"></div>
                </div>
                <div class="playlist-details ${isExpanded ? 'expanded' : ''}">
                    <div class="video-list">
                        ${playlist.videos.map(video => `
                            <div class="video-item ${video.locked ? 'locked' : ''}" data-url="${video.url || ''}">
                                <input type="checkbox" class="video-checkbox" 
                                    ${video.completed ? 'checked' : ''} 
                                    ${video.locked ? 'disabled' : ''}
                                    data-playlist="${playlist.id}" 
                                    data-video="${video.id}">
                                <div class="video-title">${video.title}</div>
                                <div class="video-status ${getStatusClass(video)}">${getStatusText(video)}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Attach event listeners
            attachEventListeners(playlistEl, playlist.id);
            
            return playlistEl;
        }
        
        // Attach event listeners to playlist elements
        function attachEventListeners(playlistEl, playlistId) {
            // Expand/collapse functionality
            const header = playlistEl.querySelector('.playlist-header');
            const details = playlistEl.querySelector('.playlist-details');
            const expandIcon = playlistEl.querySelector('.expand-icon');
            
            header.addEventListener('click', (e) => {
                // Don't trigger if edit button or external link was clicked
                if (!e.target.closest('.btn-edit-playlist') && !e.target.closest('.open-resource-btn')) {
                    if (details.classList.contains('expanded')) {
                        details.classList.remove('expanded');
                        expandIcon.style.transform = 'rotate(0deg)';
                        expandedPlaylistId = null;
                    } else {
                        // Close any other expanded playlists
                        document.querySelectorAll('.playlist-details.expanded').forEach(el => {
                            el.classList.remove('expanded');
                            const icon = el.parentElement.querySelector('.expand-icon');
                            if (icon) icon.style.transform = 'rotate(0deg)';
                        });
                        
                        details.classList.add('expanded');
                        expandIcon.style.transform = 'rotate(180deg)';
                        expandedPlaylistId = playlistId;
                    }
                }
            });
            
            // Edit playlist button
            const editBtn = playlistEl.querySelector('.btn-edit-playlist');
            editBtn.addEventListener('click', () => {
                openEditPlaylistModal(playlistId);
            });
            
            // Video completion checkboxes
            const checkboxes = playlistEl.querySelectorAll('.video-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', handleVideoCompletion);
            });
            
            // Video click to open URL
            const videoItems = playlistEl.querySelectorAll('.video-item');
            videoItems.forEach(videoItem => {
                videoItem.addEventListener('click', (e) => {
                    // Don't trigger if checkbox was clicked
                    if (!e.target.classList.contains('video-checkbox') && !videoItem.classList.contains('locked')) {
                        const url = videoItem.dataset.url;
                        if (url) {
                            window.open(url, '_blank');
                        }
                    }
                });
            });
        }
        
        // Open edit playlist modal
        function openEditPlaylistModal(playlistId) {
            const playlist = appData.playlists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            currentEditingPlaylistId = playlistId;
            
            // Fill form with current data
            document.getElementById('editPlaylistId').value = playlist.id;
            document.getElementById('editPlaylistName').value = playlist.name;
            document.getElementById('editPlaylistSource').value = playlist.source;
            document.getElementById('editPlaylistUrl').value = playlist.url || '';
            
            // Show modal
            editPlaylistModal.classList.add('active');
        }
        
        // Handle edit playlist form submission
        function handleEditPlaylistSubmit(e) {
            e.preventDefault();
            
            const playlistId = parseInt(document.getElementById('editPlaylistId').value);
            const playlistName = document.getElementById('editPlaylistName').value;
            const playlistSource = document.getElementById('editPlaylistSource').value;
            const playlistUrl = document.getElementById('editPlaylistUrl').value;
            
            const playlist = appData.playlists.find(p => p.id === playlistId);
            if (playlist) {
                playlist.name = playlistName;
                playlist.source = playlistSource;
                playlist.url = playlistUrl;
                
                // Save to localStorage
                savePlaylists();
                
                // Update UI
                renderPlaylists();
                
                // Close modal
                editPlaylistModal.classList.remove('active');
                
                alert('Playlist updated successfully!');
            }
        }
        
        // Open edit videos modal
        function openEditVideosModal() {
            const playlistId = currentEditingPlaylistId;
            const playlist = appData.playlists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            // Populate video edit list
            videoEditList.innerHTML = '';
            
            playlist.videos.forEach((video, index) => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-edit-item';
                videoItem.innerHTML = `
                    <input type="text" class="video-edit-input" value="${video.title}" data-video-id="${video.id}" placeholder="Video title">
                    <div class="video-edit-actions">
                        <button type="button" class="btn-small btn-danger delete-video-btn" title="Delete video">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                videoEditList.appendChild(videoItem);
                
                // Add event listener for delete button only
                const deleteBtn = videoItem.querySelector('.delete-video-btn');
                deleteBtn.addEventListener('click', () => deleteVideo(playlistId, video.id));
            });
            
            // Switch to edit videos modal
            editPlaylistModal.classList.remove('active');
            editVideosModal.classList.add('active');
        }
        

        
        // Add new video to edit list
        function addVideoToEditList() {
            const newVideoItem = document.createElement('div');
            newVideoItem.className = 'video-edit-item';
            newVideoItem.innerHTML = `
                <input type="text" class="video-edit-input" placeholder="Enter video title..." data-video-id="new">
                <div class="video-edit-actions">
                    <button type="button" class="btn-small btn-danger delete-video-btn" title="Remove">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            videoEditList.appendChild(newVideoItem);
            
            // Auto-focus the new input
            const input = newVideoItem.querySelector('.video-edit-input');
            input.focus();
            
            // Add event listener for delete button
            const deleteBtn = newVideoItem.querySelector('.delete-video-btn');
            deleteBtn.addEventListener('click', function() {
                newVideoItem.remove();
            });
        }
        
        // Save edited videos
        function saveEditedVideos() {
            const playlistId = currentEditingPlaylistId;
            const playlist = appData.playlists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            const videoInputs = videoEditList.querySelectorAll('.video-edit-input');
            const updatedVideos = [];
            
            videoInputs.forEach(input => {
                const title = input.value.trim();
                if (title) {
                    const videoId = input.dataset.videoId;
                    
                    if (videoId === 'new') {
                        // Create new video
                        updatedVideos.push({
                            id: Date.now() + Math.random(),
                            title: title,
                            completed: false,
                            locked: updatedVideos.length > 0, // Lock if not first video
                            url: ''
                        });
                    } else {
                        // Find existing video and update title
                        const existingVideo = playlist.videos.find(v => v.id === parseInt(videoId));
                        if (existingVideo) {
                            existingVideo.title = title;
                            updatedVideos.push(existingVideo);
                        }
                    }
                }
            });
            
            // Replace videos array
            playlist.videos = updatedVideos;
            
            // Update locking logic
            updateVideoLocks(playlist);
            
            // Save and update UI
            savePlaylists();
            renderPlaylists();
            
            // Close modal and show success message
            editVideosModal.classList.remove('active');
            alert('Videos updated successfully!');
        }

        function updateVideoLocks(playlist) {
            let foundIncomplete = false;
            
            playlist.videos.forEach(video => {
                if (foundIncomplete) {
                    video.locked = true;
                } else {
                    video.locked = false;
                    if (!video.completed) {
                        foundIncomplete = true;
                    }
                }
            });
        }       
        
        
        // Delete playlist
        function deletePlaylist() {
            if (confirm('Are you sure you want to delete this playlist? This action cannot be undone.')) {
                const playlistId = currentEditingPlaylistId;
                appData.playlists = appData.playlists.filter(p => p.id !== playlistId);
                
                // Save to localStorage
                savePlaylists();
                
                // Update UI
                updateStats();
                renderPlaylists();
                
                // Close modal
                editPlaylistModal.classList.remove('active');
                
                alert('Playlist deleted successfully!');
            }
        }
        
        // Handle video completion
        function handleVideoCompletion(e) {
            const playlistId = parseInt(e.target.dataset.playlist);
            const videoId = parseInt(e.target.dataset.video);
            const checked = e.target.checked;
            
            // Find the playlist and video
            const playlist = appData.playlists.find(p => p.id === playlistId);
            const video = playlist.videos.find(v => v.id === videoId);
            
            if (video) {
                video.completed = checked;
                
                // If this video is completed, unlock the next one
                if (checked) {
                    const videoIndex = playlist.videos.findIndex(v => v.id === videoId);
                    if (videoIndex < playlist.videos.length - 1) {
                        playlist.videos[videoIndex + 1].locked = false;
                    }
                    
                    // Update streak
                    updateStreak(true);
                    
                    // Add to study history with exact topic details
                    const today = new Date().toISOString().split('T')[0];
                    if (!appData.studyHistory[today]) {
                        appData.studyHistory[today] = [];
                    }
                    
                    // Add study record with exact topic
                    appData.studyHistory[today].push({
                        playlist: playlist.name,
                        video: video.title,
                        completedAt: new Date().toISOString()
                    });
                    
                    localStorage.setItem('studyHistory', JSON.stringify(appData.studyHistory));
                } else {
                    // Remove from study history when unchecked
                    const today = new Date().toISOString().split('T')[0];
                    if (appData.studyHistory[today]) {
                        // Find and remove the study record for this video
                        appData.studyHistory[today] = appData.studyHistory[today].filter(
                            record => !(record.playlist === playlist.name && record.video === video.title)
                        );
                        
                        // If no studies left for today, remove the day entirely
                        if (appData.studyHistory[today].length === 0) {
                            delete appData.studyHistory[today];
                        }
                        
                        localStorage.setItem('studyHistory', JSON.stringify(appData.studyHistory));
                    }
                }
                
                // Update playlist progress
                const completedVideos = playlist.videos.filter(v => v.completed).length;
                playlist.progress = Math.round((completedVideos / playlist.videos.length) * 100);
                
                // Save and update UI
                savePlaylists();
                updateStats();
                renderPlaylists();
                generateCalendar(); // Update calendar when completion status changes
                
                // Check for completion achievements
                checkPlaylistAchievements();
            }
        }
        
        // Switch between tabs
        function switchTab(tabName) {
            // Update active tab
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update active tab content
            tabContents.forEach(content => {
                if (content.id === `${tabName}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            // Update tabs container data attribute for CSS animation
            tabsContainer.setAttribute('data-active-tab', tabName);
        }
        
        // Add goal
        function addGoal() {
            const title = goalTitleEl.value.trim();
            
            if (!title) {
                alert('Please enter a goal title.');
                return;
            }
            
            const today = new Date().toDateString();
            
            const goal = {
                id: Date.now(),
                title,
                completed: false,
                date: today,
                createdAt: new Date().toISOString()
            };
            
            appData.dailyGoals.push(goal);
            localStorage.setItem('dailyGoals', JSON.stringify(appData.dailyGoals));
            
            // Clear form
            goalTitleEl.value = '';
            
            // Update UI
            renderTodayGoals();
            renderGoals();
            renderTimeline();
            
            
        }
        
        // Render goals in goals tab
        function renderGoals() {
            const today = new Date().toDateString();
            const todayGoals = appData.dailyGoals.filter(goal => goal.date === today);
            
            goalsList.innerHTML = '';
            
            if (todayGoals.length === 0) {
                goalsList.innerHTML = '<p style="text-align: center; color: var(--gray); padding: 20px;">No goals set for today. Add your first goal above!</p>';
                return;
            }
            
            todayGoals.forEach(goal => {
                const goalEl = document.createElement('div');
                goalEl.className = 'goal-item';
                goalEl.innerHTML = `
                    <input type="checkbox" class="goal-checkbox" ${goal.completed ? 'checked' : ''} data-id="${goal.id}">
                    <div class="goal-text">${goal.title}</div>
                `;
                goalsList.appendChild(goalEl);
                
                // Add event listener for checkbox
                const checkbox = goalEl.querySelector('.goal-checkbox');
                checkbox.addEventListener('change', (e) => {
                    toggleGoalCompletion(goal.id, e.target.checked);
                });
            });
        }
        
        function renderTimeline() {



    const today = new Date();

    const data = [];

    // Get data for last 7 days

    for (let i = 6; i >= 0; i--) {

        const date = new Date();

        date.setDate(today.getDate() - i);

        const dateStr = date.toDateString();

        const goals = appData.dailyGoals.filter(goal => goal.date === dateStr);

        const completed = goals.filter(goal => goal.completed).length;

        const total = goals.length;

        const percentage = total > 0 ? (completed / total) * 100 : 0;

        const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

        const label = dayNames[date.getDay()];

        data.push({

            date: dateStr,

            percentage: percentage,

            label: label,

            completed: completed,

            total: total

        });

    }

    // Check if timeline already exists

    const existingTimeline = timelineChartEl.querySelector('.timeline-chart-container');

    

    if (existingTimeline) {

        // Update existing timeline instead of recreating

        updateExistingTimeline(existingTimeline, data);

    } else {

        // Create new timeline

        createNewTimeline(data);

    }

}

        function createNewTimeline(data) {

    // Clear previous content

    timelineChartEl.innerHTML = '';

    // Check if there's any data

    const totalGoals = data.reduce((sum, item) => sum + item.total, 0);

    if (totalGoals === 0) {

        const noDataMsg = document.createElement('div');

        noDataMsg.className = 'no-data-message';

        noDataMsg.innerHTML = `

            <i class="fas fa-chart-bar"></i>

            <h4>No Goals Set</h4>

            <p>Add some daily goals to see your progress timeline</p>

        `;

        timelineChartEl.appendChild(noDataMsg);

        return;

    }

    // Create main chart container

    const chartContainer = document.createElement('div');

    chartContainer.className = 'timeline-chart-container';

    // Create Y-axis and chart area container

    const chartArea = document.createElement('div');

    chartArea.className = 'timeline-chart-area';

    // Create Y-axis labels

    const yAxis = document.createElement('div');

    yAxis.className = 'timeline-y-axis';

    

    [100, 75, 50, 25, 0].forEach(percent => {

        const label = document.createElement('div');

        label.className = 'y-axis-label';

        label.textContent = `${percent}%`;

        yAxis.appendChild(label);

    });

    // Create chart content area

    const chartContent = document.createElement('div');

    chartContent.className = 'timeline-chart-content';

    // Create grid lines

    const gridLines = document.createElement('div');

    gridLines.className = 'timeline-grid-lines';

    

    [100, 75, 50, 25, 0].forEach(() => {

        const gridLine = document.createElement('div');

        gridLine.className = 'grid-line';

        gridLines.appendChild(gridLine);

    });

    // Create bars container

    const barsContainer = document.createElement('div');

    barsContainer.className = 'timeline-bars-container';

    // Create bars with animation

    data.forEach((item, index) => {

        const barColumn = createBarColumn(item, index, true); // true = animate

        barsContainer.appendChild(barColumn);

    });

    // Assemble the chart

    chartContent.appendChild(gridLines);

    chartContent.appendChild(barsContainer);

    chartArea.appendChild(yAxis);

    chartArea.appendChild(chartContent);

    chartContainer.appendChild(chartArea);

    

    timelineChartEl.appendChild(chartContainer);

}

        function updateExistingTimeline(existingTimeline, data) {

    const barsContainer = existingTimeline.querySelector('.timeline-bars-container');

    const existingBars = barsContainer.querySelectorAll('.timeline-bar-column');

    

    // Update each bar with smooth transition

    data.forEach((item, index) => {

        if (existingBars[index]) {

            // Update existing bar

            updateBar(existingBars[index], item);

        } else {

            // Add new bar if needed (shouldn't happen with 7 days)

            const newBarColumn = createBarColumn(item, index, true);

            barsContainer.appendChild(newBarColumn);

        }

    });

}

        function createBarColumn(item, index, shouldAnimate) {

    const barColumn = document.createElement('div');

    barColumn.className = 'timeline-bar-column';

    const bar = document.createElement('div');

    bar.className = 'timeline-bar';

    

    // Calculate height - ensure minimum 8% for visibility

    const barHeight = item.total > 0 ? Math.max(item.percentage, 8) : 8;

    bar.style.height = `${barHeight}%`;

    

    // Set data attribute for color coding

    bar.setAttribute('data-percentage', Math.round(item.percentage));

    

    // Apply color based on percentage

    updateBarColor(bar, item.percentage);

    

    // Add data label

    if (item.total > 0) {

        const dataLabel = document.createElement('div');

        dataLabel.className = 'bar-data-label';

        dataLabel.textContent = `${Math.round(item.percentage)}%`;

        bar.appendChild(dataLabel);

    }

    // Create day label

    const dayLabel = document.createElement('div');

    dayLabel.className = 'timeline-day-label';

    dayLabel.textContent = item.label;

    barColumn.appendChild(bar);

    barColumn.appendChild(dayLabel);

    

    // Add animation if requested

    if (shouldAnimate) {

        setTimeout(() => {

            bar.classList.add('animate');

        }, index * 150);

    } else {

        // If no animation needed, set the final state immediately

        bar.style.transform = 'scaleY(1)';

        bar.style.opacity = '1';

    }

    

    return barColumn;

}

        function updateBar(barColumn, item) {

    const bar = barColumn.querySelector('.timeline-bar');

    const dataLabel = bar.querySelector('.bar-data-label');

    const dayLabel = barColumn.querySelector('.timeline-day-label');

    

    // Calculate new height

    const newHeight = item.total > 0 ? Math.max(item.percentage, 8) : 8;

    const newPercentage = Math.round(item.percentage);

    

    // Update data attribute

    bar.setAttribute('data-percentage', newPercentage);

    

    // Update color

    updateBarColor(bar, item.percentage);

    

    // Update data label

    if (dataLabel) {

        dataLabel.textContent = `${newPercentage}%`;

    }

    

    // Update day label (in case it changed)

    if (dayLabel) {

        dayLabel.textContent = item.label;

    }

    

    // Animate height change

    bar.style.transition = 'height 0.8s cubic-bezier(0.4, 0, 0.2, 1)';

    bar.style.height = `${newHeight}%`;

    

    // Remove any existing animation classes and re-add for smooth update

    bar.classList.remove('animate');

    void bar.offsetWidth; // Trigger reflow

    bar.classList.add('animate');

}

        function updateBarColor(bar, percentage) {

    const roundedPercentage = Math.round(percentage);

    

    // Remove all color classes

    bar.classList.remove('color-0', 'color-1-25', 'color-26-50', 'color-51-75', 'color-76-99', 'color-100');

    

    // Add appropriate color class

    if (roundedPercentage === 0) {

        bar.classList.add('color-0');

    } else if (roundedPercentage >= 1 && roundedPercentage <= 25) {

        bar.classList.add('color-1-25');

    } else if (roundedPercentage >= 26 && roundedPercentage <= 50) {

        bar.classList.add('color-26-50');

    } else if (roundedPercentage >= 51 && roundedPercentage <= 75) {

        bar.classList.add('color-51-75');

    } else if (roundedPercentage >= 76 && roundedPercentage <= 99) {

        bar.classList.add('color-76-99');

    } else if (roundedPercentage === 100) {

        bar.classList.add('color-100');

    }

}

        // Enhanced tooltip functions
        let timelineTooltip = null;

        function showTimelineTooltip(e, text) {
            if (!timelineTooltip) {
                timelineTooltip = document.createElement('div');
                timelineTooltip.className = 'timeline-tooltip';
                timelineTooltip.id = 'timeline-tooltip';
                document.body.appendChild(timelineTooltip);
            }
            
            timelineTooltip.textContent = text;
            timelineTooltip.classList.add('show');
            timelineTooltip.style.visibility = 'hidden';
            setTimeout(() => updateTimelineTooltipPosition(e), 10);
        }

        function updateTimelineTooltipPosition(e) {
            if (!timelineTooltip) return;
            
            const rect = timelineTooltip.getBoundingClientRect();
            let left = e.clientX - rect.width / 2;
            let top = e.clientY - rect.height - 15;
            
            const padding = 10;
            if (left < padding) left = padding;
            if (left + rect.width > window.innerWidth - padding) {
                left = window.innerWidth - rect.width - padding;
            }
            if (top < padding) top = e.clientY + 15;
            
            timelineTooltip.style.left = `${left}px`;
            timelineTooltip.style.top = `${top}px`;
            timelineTooltip.style.visibility = 'visible';
        }

        function hideTimelineTooltip() {
            if (timelineTooltip) {
                timelineTooltip.classList.remove('show');
                timelineTooltip.style.visibility = 'hidden';
            }
        }

        // Clean up tooltip on page unload
        window.addEventListener('beforeunload', () => {
            if (timelineTooltip) {
                timelineTooltip.remove();
            }
        });
        const sampleData = {
            streak: 15,
            playlists: [
                { progress: 100 },
                { progress: 60 },
                { progress: 30 }
            ],
            totalFocusTime: 12.5
        };
        // NEW: Render dashboard achievements
        function renderDashboardAchievements() {
            const achievements = [
                { id: 'weekly_warrior', name: 'Weekly Warrior', description: '7-day study streak', icon: 'fa-fire', target: 7, type: 'streak' },
                { id: 'monthly_master', name: 'Monthly Master', description: '30-day study streak', icon: 'fa-trophy', target: 30, type: 'streak' },
                { id: 'first_steps', name: 'First Steps', description: 'First playlist created', icon: 'fa-play-circle', target: 1, type: 'playlist_count' },
                { id: 'course_conqueror', name: 'Course Conqueror', description: 'First playlist completed', icon: 'fa-check-circle', target: 1, type: 'completed_playlists' },
                { id: '5_hour_power', name: '5-Hour Power', description: '5 hours of study time', icon: 'fa-clock', target: 5, type: 'focus_time' }
            ];
            
            dashboardAchievementsGrid.innerHTML = '';
            
            const earnedAchievements = achievements.filter(achievement => {
                if (achievement.type === 'streak') {
                    return appData.streak >= achievement.target;
                } else if (achievement.type === 'playlist_count') {
                    return appData.playlists.length >= achievement.target;
                } else if (achievement.type === 'completed_playlists') {
                    return appData.playlists.filter(p => p.progress === 100).length >= achievement.target;
                } else if (achievement.type === 'focus_time') {
                    return appData.totalFocusTime >= achievement.target;
                }
                return false;
            });
            
            if (earnedAchievements.length === 0) {
                dashboardAchievementsGrid.innerHTML = `
                    <div class="no-achievements">
                        <i class="fas fa-trophy"></i>
                        <h3>No Achievements Yet</h3>
                        <p>Complete tasks to unlock achievements</p>
                    </div>
                `;
                return;
            }
            
            // Show only the first 4 earned achievements
            const displayAchievements = earnedAchievements.slice(0, 4);
            
            displayAchievements.forEach(achievement => {
                const achievementEl = document.createElement('div');
                achievementEl.className = 'dashboard-achievement-card';
                achievementEl.innerHTML = `
                    <div class="dashboard-achievement-icon">
                        <i class="fas ${achievement.icon}"></i>
                    </div>
                    <div class="dashboard-achievement-name">${achievement.name}</div>
                    <div class="dashboard-achievement-desc">${achievement.description}</div>
                `;
                dashboardAchievementsGrid.appendChild(achievementEl);
            });
        }
        
// Render achievements with proper progress display - FIXED VERSION
function renderAchievements() {
    achievementsGrid.innerHTML = '';
    
    
    const achievements = [
        // Streak achievements
        { id: 'weekly_warrior', name: 'Weekly Warrior', description: 'Maintain a 7-day study streak', icon: 'fa-fire', target: 7, type: 'streak', filterType: 'streak' },
        { id: 'monthly_master', name: 'Monthly Master', description: 'Maintain a 30-day study streak', icon: 'fa-trophy', target: 30, type: 'streak', filterType: 'streak' },
        { id: 'half_century', name: 'Half Century', description: 'Reach 50 consecutive days of learning', icon: 'fa-flag', target: 50, type: 'streak', filterType: 'streak' },
        { id: 'century_club', name: 'Century Club', description: 'Achieve 100 days of consistent learning', icon: 'fa-crown', target: 100, type: 'streak', filterType: 'streak' },
        { id: 'virtuoso', name: 'Virtuoso', description: 'Master 150 days of continuous learning', icon: 'fa-star', target: 150, type: 'streak', filterType: 'streak' },
        { id: 'sage', name: 'Sage', description: 'Complete 200 days of dedicated learning', icon: 'fa-gem', target: 200, type: 'streak', filterType: 'streak' },
        { id: 'grand_master', name: 'Grand Master', description: 'One full year of consistent learning', icon: 'fa-medal', target: 365, type: 'streak', filterType: 'streak' },
        
        // Playlist achievements
        { id: 'first_steps', name: 'First Steps', description: 'Create your first learning playlist', icon: 'fa-play-circle', target: 1, type: 'playlist_count', filterType: 'playlist' },
        { id: 'course_conqueror', name: 'Course Conqueror', description: 'Complete your first playlist', icon: 'fa-check-circle', target: 1, type: 'completed_playlists', filterType: 'playlist' },
        { id: 'knowledge_seeker', name: 'Knowledge Seeker', description: 'Complete 5 different playlists', icon: 'fa-book', target: 5, type: 'completed_playlists', filterType: 'playlist' },
        { id: 'learning_luminary', name: 'Learning Luminary', description: 'Master 10 complete playlists', icon: 'fa-lightbulb', target: 10, type: 'completed_playlists', filterType: 'playlist' },
        { id: 'master_of_mastery', name: 'Master of Mastery', description: 'Finish 25 comprehensive playlists', icon: 'fa-graduation-cap', target: 25, type: 'completed_playlists', filterType: 'playlist' },
        
        // Focus Mode achievements
        { id: '5_hour_power', name: '5-Hour Power', description: 'Accumulate 5 hours of focused study', icon: 'fa-clock', target: 5, type: 'focus_time', filterType: 'focus' },
        { id: '10_hour_hustler', name: '10-Hour Hustler', description: 'Reach 10 hours of dedicated focus', icon: 'fa-bolt', target: 10, type: 'focus_time', filterType: 'focus' },
        { id: '25_hour_scholar', name: '25-Hour Scholar', description: 'Achieve 25 hours of deep learning', icon: 'fa-graduation-cap', target: 25, type: 'focus_time', filterType: 'focus' },
        { id: '50_hour_master', name: '50-Hour Master', description: 'Complete 50 hours of focused study', icon: 'fa-crown', target: 50, type: 'focus_time', filterType: 'focus' },
        { id: '100_hour_virtuoso', name: '100-Hour Virtuoso', description: 'Master 100 hours of learning', icon: 'fa-star', target: 100, type: 'focus_time', filterType: 'focus' }
    ];
    
    // Check if no achievements are available
    if (achievements.length === 0) {
        const emptyState = document.createElement('div');
        emptyState.className = 'achievements-empty-state';
        emptyState.innerHTML = `
            <i class="fas fa-trophy"></i>
            <h3>No Achievements Available</h3>
            <p>Achievements will appear here as you progress in your learning journey</p>
        `;
        achievementsGrid.appendChild(emptyState);
        return;
    }
    
    achievements.forEach(achievement => {
        const progress = calculateAchievementProgress(achievement);
        const isEarned = progress.earned;
        
        const achievementEl = document.createElement('div');
        achievementEl.className = `achievement-card ${isEarned ? 'earned' : ''}`;
        achievementEl.dataset.type = achievement.filterType;
        
        let progressContent = '';
        
        if (isEarned) {
            // For earned achievements - show "Unlocked" text and completion badge
            progressContent = `
                <div class="completed-badge">
                    <i class="fas fa-check"></i>
                </div>
                <div class="unlocked-text">
                    <i class="fas fa-check"></i> Unlocked
                </div>
            `;
        } else {
            // For unearned achievements - show progress bar and stats
            // FIX: Ensure progress is at least 1% for visibility if there's any progress
            const displayProgress = Math.max(progress.progress, progress.current > 0 ? 1 : 0);
            
            progressContent = `
                <div class="achievement-progress-section">
                    <div class="progress-stats">
                        <span class="progress-text">
                            ${achievement.type === 'focus_time' ? 
                                `${progress.current.toFixed(1)}/${achievement.target} hours` : 
                                `${progress.current}/${achievement.target}`}
                        </span>
                        <span class="progress-percentage">${Math.round(displayProgress)}%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: ${displayProgress}%"></div>
                    </div>
                </div>
            `;
        }
        
        achievementEl.innerHTML = `
            <div class="achievement-header">
                <div class="achievement-icon-container ${isEarned ? 'earned' : ''}">
                    <i class="fas ${achievement.icon} achievement-icon"></i>
                </div>
                <div class="achievement-info">
                    <div class="achievement-name">${achievement.name}</div>
                    <div class="achievement-description">${achievement.description}</div>
                </div>
            </div>
            ${progressContent}
        `;
        
        achievementsGrid.appendChild(achievementEl);
        
        // FIX: Add animation for progress bars after a short delay
        if (!isEarned) {
            setTimeout(() => {
                const progressBar = achievementEl.querySelector('.progress-bar');
                if (progressBar) {
                    // Force reflow to ensure animation works
                    void progressBar.offsetWidth;
                }
            }, 100);
        }
    });
}

        // Achievement filtering functionality
        function setupAchievementFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Update active filter button
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter achievements
                    const filter = this.dataset.filter;
                    filterAchievements(filter);
                });
            });
        }

        function filterAchievements(filter) {
            const achievementCards = document.querySelectorAll('.achievement-card');
            
            achievementCards.forEach(card => {
                if (filter === 'all') {
                    card.style.display = 'flex';
                } else {
                    const achievementType = card.dataset.type;
                    if (achievementType === filter) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                }
            });
        }
        
        // Check streak achievements
        function checkStreakAchievements() {
            renderAchievements();
            renderDashboardAchievements();
        }
        
        // Check playlist achievements
        function checkPlaylistAchievements() {
            renderAchievements();
            renderDashboardAchievements();
        }
        
        // Check focus time achievements
        function checkFocusAchievements() {
            renderAchievements();
            renderDashboardAchievements();
        }
        
        // Helper function to count earned achievements
        function calculateEarnedAchievements() {
            const achievements = [
                { id: 'weekly_warrior', target: 7, type: 'streak' },
                { id: 'monthly_master', target: 30, type: 'streak' },
                { id: 'half_century', target: 50, type: 'streak' },
                { id: 'century_club', target: 100, type: 'streak' },
                { id: 'virtuoso', target: 150, type: 'streak' },
                { id: 'sage', target: 200, type: 'streak' },
                { id: 'grand_master', target: 365, type: 'streak' },
                { id: 'first_steps', target: 1, type: 'playlist_count' },
                { id: 'course_conqueror', target: 1, type: 'completed_playlists' },
                { id: 'knowledge_seeker', target: 5, type: 'completed_playlists' },
                { id: 'learning_luminary', target: 10, type: 'completed_playlists' },
                { id: 'master_of_mastery', target: 25, type: 'completed_playlists' },
                { id: '5_hour_power', target: 5, type: 'focus_time' },
                { id: '10_hour_hustler', target: 10, type: 'focus_time' },
                { id: '25_hour_scholar', target: 25, type: 'focus_time' },
                { id: '50_hour_master', target: 50, type: 'focus_time' },
                { id: '100_hour_virtuoso', target: 100, type: 'focus_time' }
            ];
            
            return achievements.filter(achievement => {
                if (achievement.type === 'streak') {
                    return appData.streak >= achievement.target;
                } else if (achievement.type === 'playlist_count') {
                    return appData.playlists.length >= achievement.target;
                } else if (achievement.type === 'completed_playlists') {
                    return appData.playlists.filter(p => p.progress === 100).length >= achievement.target;
                } else if (achievement.type === 'focus_time') {
                    return appData.totalFocusTime >= achievement.target;
                }
                return false;
            }).length;
        }
        
        // FOCUS MODE FUNCTIONS
        function startFocusSession() {
            const task = focusTaskInput.value.trim();
            if (!task) {
                alert('Please enter a task name for your focus session.');
                return;
            }
            
            // Set focus session data
            currentFocusTask = task;
            focusTimeLeft = selectedDuration * 60; // Convert minutes to seconds
            focusSessionStartTime = new Date();
            isFocusRunning = true;
            
            // Update UI
            focusTaskDisplay.textContent = `Working on: ${task}`;
            updateFocusTimerDisplay();
            focusSessionActive.classList.add('active');
            
            // Start timer
            focusTimer = setInterval(updateFocusTimer, 1000);
            
            // Request fullscreen if available
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            }
        }
        
        function pauseFocusSession() {
            isFocusRunning = !isFocusRunning;
            
            if (isFocusRunning) {
                pauseFocusSessionBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                focusTimer = setInterval(updateFocusTimer, 1000);
            } else {
                pauseFocusSessionBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                clearInterval(focusTimer);
            }
        }
        
        function endFocusSession() {
            clearInterval(focusTimer);
            isFocusRunning = false;
            
            // Record the session
            recordFocusSession();
            
            // Exit fullscreen if active
            if (document.fullscreenElement) {
                document.exitFullscreen();
            }
            
            // Return to focus tab
            focusSessionActive.classList.remove('active');
            
            // Show completion message
            alert('Focus session completed! Great job staying focused.');
        }
        
        function updateFocusTimer() {
            if (!isFocusRunning) return;
            
            focusTimeLeft--;
            
            if (focusTimeLeft <= 0) {
                endFocusSession();
                
                // Show notification
                if (Notification.permission === 'granted') {
                    new Notification('Focus Session Complete!', {
                        body: 'Time for a break!',
                        icon: '/icon.png'
                    });
                }
            }
            
            updateFocusTimerDisplay();
        }
        
        function updateFocusTimerDisplay() {
            const minutes = Math.floor(focusTimeLeft / 60);
            const seconds = focusTimeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            focusTimerDisplay.textContent = timeString;
        }
        
        // Record focus session
        function recordFocusSession() {
            if (!focusSessionStartTime) return;
            
            const sessionEndTime = new Date();
            const duration = (sessionEndTime - focusSessionStartTime) / (1000 * 60 * 60); // Convert to hours
            
            const session = {
                id: Date.now(),
                task: currentFocusTask,
                startTime: focusSessionStartTime.toISOString(),
                endTime: sessionEndTime.toISOString(),
                duration: duration,
                date: focusSessionStartTime.toISOString().split('T')[0]
            };
            
            appData.focusHistory.unshift(session);
            appData.totalFocusTime += duration;
            
            // Save to localStorage
            localStorage.setItem('focusHistory', JSON.stringify(appData.focusHistory));
            localStorage.setItem('totalFocusTime', appData.totalFocusTime);
            
            // Update UI
            renderFocusHistory();
            checkFocusAchievements();
            
            // Reset session
            focusSessionStartTime = null;
        }
        
        // Render focus history
        function renderFocusHistory() {
            focusHistoryList.innerHTML = '';
            
            if (appData.focusHistory.length === 0) {
                focusHistoryList.innerHTML = `
                    <div class="no-focus-history">
                        <i class="fas fa-clock"></i>
                        <h3>No Focus Sessions Yet</h3>
                        <p>Start your first focus session to see it here</p>
                    </div>
                `;
                return;
            }
            
            // Show only last 10 sessions
            const recentSessions = appData.focusHistory.slice(0, 10);
            
            recentSessions.forEach(session => {
                const historyItem = document.createElement('div');
                historyItem.className = 'focus-history-item';
                historyItem.innerHTML = `
                    <div class="focus-history-info">
                        <div class="focus-history-task">${session.task}</div>
                        <div class="focus-history-date">${new Date(session.startTime).toLocaleDateString()}</div>
                    </div>
                    <div class="focus-history-duration">${session.duration.toFixed(2)}h</div>
                `;
                focusHistoryList.appendChild(historyItem);
            });
        }
        
        // Update data statistics
        function updateDataStats() {
            // Calculate data size
            const dataStr = JSON.stringify(appData);
            const dataSize = new Blob([dataStr]).size;
            dataSizeEl.textContent = `${(dataSize / 1024).toFixed(2)} KB`;
            
            // Update last export
            if (appData.settings.lastExport) {
                lastExportEl.textContent = new Date(appData.settings.lastExport).toLocaleDateString();
            } else {
                lastExportEl.textContent = 'Never';
            }
        }
        
        // Export data
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `Achieve-mate-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            // Update last export
            appData.settings.lastExport = new Date().toISOString();
            localStorage.setItem('settings', JSON.stringify(appData.settings));
            updateDataStats();
            
            alert('Data exported successfully!');
        }
        
        // Import data
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        
                        // Validate the imported data structure
                        if (importedData.playlists && Array.isArray(importedData.playlists)) {
                            if (confirm('This will replace all your current data. Continue?')) {
                                // Update app data
                                Object.assign(appData, importedData);
                                
                                // Save to localStorage
                                saveAllData();
                                
                                // Update UI
                                init();
                                
                                alert('Data imported successfully!');
                            }
                        } else {
                            alert('Invalid data format. Please select a valid backup file.');
                        }
                    } catch (error) {
                        alert('Error reading file. Please make sure it\'s a valid JSON file.');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Clear all data
        function clearAllData() {
            if (confirm('This will permanently delete all your data. This action cannot be undone. Continue?')) {
                localStorage.clear();
                location.reload();
            }
        }
        
        // Report bug function
        function reportBug() {
            const email = 'thedeepkjha4u@gmail.com';
            const subject = 'Achieve-mate Bug Report';
            const body = 'Please describe the bug you encountered:';
            
            window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        }
        
        // Write review function
        function writeReview() {
            const email = 'thedeepkjha4u@gmail.com';
            const subject = 'Achieve-mate Review';
            const body = 'Please share your feedback or review about Achieve-mate:';
            
            window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        }
        
        // Save all data to localStorage
        function saveAllData() {
            localStorage.setItem('learningPlaylists', JSON.stringify(appData.playlists));
            localStorage.setItem('learningStreak', appData.streak);
            localStorage.setItem('lastCompletedDate', appData.lastCompletedDate);
            localStorage.setItem('studyHistory', JSON.stringify(appData.studyHistory));
            localStorage.setItem('dailyGoals', JSON.stringify(appData.dailyGoals));
            localStorage.setItem('goalProgress', JSON.stringify(appData.goalProgress));
            localStorage.setItem('achievements', JSON.stringify(appData.achievements));
            localStorage.setItem('focusHistory', JSON.stringify(appData.focusHistory));
            localStorage.setItem('totalFocusTime', appData.totalFocusTime);
            localStorage.setItem('settings', JSON.stringify(appData.settings));
        }
        
        // Save playlists (for backward compatibility)
        function savePlaylists() {
            localStorage.setItem('learningPlaylists', JSON.stringify(appData.playlists));
        }
        
        // Helper functions
        function getSourceIcon(source) {
            const icons = {
                'youtube': 'youtube',
                'udemy': 'graduation-cap',
                'coursera': 'university',
                'other': 'link'
            };
            return icons[source] || 'play-circle';
        }
        
        function getStatusClass(video) {
            if (video.completed) return 'status-completed';
            if (video.locked) return 'status-locked';
            return 'status-pending';
        }
        
        function getStatusText(video) {
            if (video.completed) return 'Completed';
            if (video.locked) return 'Locked';
            return 'Pending';
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);

        /* =========  calendar & day-details helpers  ========= */

        let selectedDateISO = ''; // global for currently selected day
        let currentCalendarMonth = new Date().getMonth();
        let currentCalendarYear = new Date().getFullYear();

        function buildCalendar(){
          const now = new Date(currentCalendarYear, currentCalendarMonth, 1);
          const y = now.getFullYear(), m = now.getMonth();

          const firstDay = new Date(y,m,1).getDay();
          const daysInMonth = new Date(y,m+1,0).getDate();
          const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];

          currentMonthEl.textContent = `${monthNames[m]} ${y}`;

          calendarDays.innerHTML='';

          // day headers
          ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(d=>{
            const th = document.createElement('div'); th.className='calendar-day-header'; th.textContent=d; calendarDays.appendChild(th);
          });

          // empty cells
          for(let i=0;i<firstDay;i++){const e=document.createElement('div');e.className='calendar-day empty';calendarDays.appendChild(e);}

          // days
          for(let d=1;d<=daysInMonth;d++){
            const dayEl = document.createElement('div'); dayEl.className='calendar-day'; dayEl.textContent=d;

            const iso = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

            dayEl.dataset.date = iso;

            // highlight today
            const today = new Date();
            if(d===today.getDate()&&m===today.getMonth()&&y===today.getFullYear()) dayEl.classList.add('active');

            // mark studied days
            if(appData.studyHistory[iso]&&appData.studyHistory[iso].length) dayEl.classList.add('studied');

            dayEl.addEventListener('click',()=>openDayDetails(iso,dayEl));

            calendarDays.appendChild(dayEl);
          }

          // trailing empties
          const totalCells = firstDay+daysInMonth;
          for(let i=0;i<42-totalCells;i++){const e=document.createElement('div');e.className='calendar-day empty';calendarDays.appendChild(e);}
        }

        function openDayDetails(iso,dayEl){
          // visual selection
          document.querySelectorAll('.calendar-day').forEach(d=>d.classList.remove('active'));
          dayEl.classList.add('active');

          selectedDateISO = iso;

          const dateObj = new Date(iso+'T00:00:00');
          const niceDate = dateObj.toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'});

          document.getElementById('selectedDateText').textContent = niceDate;

          streakModal.classList.add('active');
          document.body.style.overflow='hidden';

          renderDayDetails(iso);
        }

        function renderDayDetails(iso){
          const content = document.getElementById('studyDetailsContent');

          const studies = appData.studyHistory[iso]||[];
          const dateStr = new Date(iso+'T00:00:00').toDateString();
          const goals = appData.dailyGoals.filter(g=>g.date===dateStr);
          const doneGoals = goals.filter(g=>g.completed).length;
          const pct = goals.length?Math.round(doneGoals/goals.length*100):0;

          content.innerHTML='';

          /* -----  Completed Learning Topics  ----- */
          if(studies.length){
            const sec = document.createElement('div');
            sec.innerHTML='<h5 style="margin:0 0 10px 0;display:flex;align-items:center;gap:8px;"><i class="fas fa-play-circle"></i>Completed Learning Topics</h5>';

            studies.forEach(s=>{
              const item = document.createElement('div'); item.className='study-item-compact';

              item.innerHTML=`
                <div class="study-playlist-name"><i class="fas fa-list"></i>${s.playlist}</div>
                <div class="study-topic-name"><i class="fas fa-play"></i>${s.video}</div>
                ${s.completedAt?`<div class="study-time"><i class="fas fa-clock"></i>${new Date(s.completedAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}</div>`:''}`;

              sec.appendChild(item);
            });

            content.appendChild(sec);
          }

          /* -----  Daily Goals Progress  ----- */
          if(goals.length){
            const sec = document.createElement('div'); sec.className='goals-section';

            sec.innerHTML=`<h5 style="margin:0 0 10px 0;display:flex;align-items:center;gap:8px;"><i class="fas fa-bullseye"></i>Daily Goals Progress</h5>
              <div class="goals-progress">
                <div><span>Completion</span><span style="color:var(--accent);font-weight:600;">${pct}%</span></div>
                <div class="progress-bar" style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;margin-top:4px;"><div class="progress" style="height:100%;width:${pct}%;background:${pct===100?'var(--success)':'var(--accent)'};transition:width .4s;"></div></div>
              </div>`;

            goals.forEach(g=>{
              const row = document.createElement('div'); row.className='goal-item-compact';

              row.innerHTML=`<div class="goal-status ${g.completed?'completed':'pending'}"><i class="fas ${g.completed?'fa-check':'fa-clock'}"></i></div><div class="goal-text">${g.title}</div>`;

              sec.appendChild(row);
            });

            content.appendChild(sec);
          }

          /* empty state */
          if(!studies.length&&!goals.length){
            content.innerHTML=`<div class="empty-state"><i class="fas fa-calendar-times"></i><p>No activity for this day</p></div>`;
          }
        }

        /* hook into existing close handler */
        if (closeStreakModal) {
            closeStreakModal.addEventListener('click',()=>{
              streakModal.classList.remove('active');
              document.body.style.overflow='';
            });
        }

        /* month navigation */
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');

        if (prevMonthBtn) {
            prevMonthBtn.addEventListener('click', () => {
                currentCalendarMonth--;
                if (currentCalendarMonth < 0) {
                    currentCalendarMonth = 11;
                    currentCalendarYear--;
                }
                buildCalendar();
            });
        }

        if (nextMonthBtn) {
            nextMonthBtn.addEventListener('click', () => {
                currentCalendarMonth++;
                if (currentCalendarMonth > 11) {
                    currentCalendarMonth = 0;
                    currentCalendarYear++;
                }
                buildCalendar();
            });
        }
    </script>
</body>
</html>
